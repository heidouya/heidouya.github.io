<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>问答题 | 黑豆的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="黑豆的博客">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.7dcbcc26.css" as="style"><link rel="preload" href="/assets/js/app.99d8b2e7.js" as="script"><link rel="preload" href="/assets/js/2.3eedf0cf.js" as="script"><link rel="preload" href="/assets/js/1.461a0297.js" as="script"><link rel="preload" href="/assets/js/28.5583a162.js" as="script"><link rel="preload" href="/assets/js/80.57c199e7.js" as="script"><link rel="prefetch" href="/assets/js/10.a8fd5793.js"><link rel="prefetch" href="/assets/js/100.44c8bd82.js"><link rel="prefetch" href="/assets/js/101.bb1c58b4.js"><link rel="prefetch" href="/assets/js/102.96141f72.js"><link rel="prefetch" href="/assets/js/103.af0c3823.js"><link rel="prefetch" href="/assets/js/104.35ed8635.js"><link rel="prefetch" href="/assets/js/105.708b89c0.js"><link rel="prefetch" href="/assets/js/106.20f03bca.js"><link rel="prefetch" href="/assets/js/107.faf5cc02.js"><link rel="prefetch" href="/assets/js/108.cb76a6bc.js"><link rel="prefetch" href="/assets/js/109.126e9cb6.js"><link rel="prefetch" href="/assets/js/11.6ec6a70f.js"><link rel="prefetch" href="/assets/js/110.ee155398.js"><link rel="prefetch" href="/assets/js/111.7cd01b2a.js"><link rel="prefetch" href="/assets/js/112.05534a62.js"><link rel="prefetch" href="/assets/js/113.8fce6fb1.js"><link rel="prefetch" href="/assets/js/114.5296ad64.js"><link rel="prefetch" href="/assets/js/115.256be922.js"><link rel="prefetch" href="/assets/js/116.3f4369e1.js"><link rel="prefetch" href="/assets/js/117.2142f60b.js"><link rel="prefetch" href="/assets/js/118.d0b314d1.js"><link rel="prefetch" href="/assets/js/119.b3dbbbba.js"><link rel="prefetch" href="/assets/js/12.47bc3be3.js"><link rel="prefetch" href="/assets/js/120.bc8cfbe9.js"><link rel="prefetch" href="/assets/js/121.949ef6c9.js"><link rel="prefetch" href="/assets/js/122.7c4f8f02.js"><link rel="prefetch" href="/assets/js/123.38ea12a6.js"><link rel="prefetch" href="/assets/js/124.f03975d1.js"><link rel="prefetch" href="/assets/js/125.7d45e38a.js"><link rel="prefetch" href="/assets/js/126.fe53a61c.js"><link rel="prefetch" href="/assets/js/127.8d0fb240.js"><link rel="prefetch" href="/assets/js/128.eb9131d8.js"><link rel="prefetch" href="/assets/js/129.6287c5aa.js"><link rel="prefetch" href="/assets/js/13.6a3faa3d.js"><link rel="prefetch" href="/assets/js/130.594a5f95.js"><link rel="prefetch" href="/assets/js/131.a25d9997.js"><link rel="prefetch" href="/assets/js/132.de9b2246.js"><link rel="prefetch" href="/assets/js/133.56ceefbb.js"><link rel="prefetch" href="/assets/js/134.0036f7d9.js"><link rel="prefetch" href="/assets/js/135.922f03c6.js"><link rel="prefetch" href="/assets/js/136.6ec3bf33.js"><link rel="prefetch" href="/assets/js/137.278bd239.js"><link rel="prefetch" href="/assets/js/138.05015bd3.js"><link rel="prefetch" href="/assets/js/139.4b37d910.js"><link rel="prefetch" href="/assets/js/14.dd3258aa.js"><link rel="prefetch" href="/assets/js/140.26ac508e.js"><link rel="prefetch" href="/assets/js/141.04d71e20.js"><link rel="prefetch" href="/assets/js/142.13d7d63c.js"><link rel="prefetch" href="/assets/js/143.46ad857e.js"><link rel="prefetch" href="/assets/js/144.80a2092f.js"><link rel="prefetch" href="/assets/js/145.e61d2536.js"><link rel="prefetch" href="/assets/js/146.94fcfb9f.js"><link rel="prefetch" href="/assets/js/147.193c9275.js"><link rel="prefetch" href="/assets/js/148.461d82f0.js"><link rel="prefetch" href="/assets/js/149.c6e43ff5.js"><link rel="prefetch" href="/assets/js/15.0a2d01b1.js"><link rel="prefetch" href="/assets/js/150.6c48a8d0.js"><link rel="prefetch" href="/assets/js/151.22a14608.js"><link rel="prefetch" href="/assets/js/152.f5e46bbb.js"><link rel="prefetch" href="/assets/js/153.3f13394c.js"><link rel="prefetch" href="/assets/js/154.d05e648e.js"><link rel="prefetch" href="/assets/js/155.2bb1659a.js"><link rel="prefetch" href="/assets/js/156.64d39ba1.js"><link rel="prefetch" href="/assets/js/157.3cdf9604.js"><link rel="prefetch" href="/assets/js/158.87e2f807.js"><link rel="prefetch" href="/assets/js/159.7503cb20.js"><link rel="prefetch" href="/assets/js/16.42369fc4.js"><link rel="prefetch" href="/assets/js/160.55c8a8b4.js"><link rel="prefetch" href="/assets/js/161.3e0fe81d.js"><link rel="prefetch" href="/assets/js/162.83297e1e.js"><link rel="prefetch" href="/assets/js/163.3e9e440c.js"><link rel="prefetch" href="/assets/js/164.d8da7753.js"><link rel="prefetch" href="/assets/js/165.1af15093.js"><link rel="prefetch" href="/assets/js/166.355e64b4.js"><link rel="prefetch" href="/assets/js/167.3a93b460.js"><link rel="prefetch" href="/assets/js/168.093d8a10.js"><link rel="prefetch" href="/assets/js/169.7783dd31.js"><link rel="prefetch" href="/assets/js/17.2e4bed97.js"><link rel="prefetch" href="/assets/js/170.323d14f0.js"><link rel="prefetch" href="/assets/js/171.2dca02c2.js"><link rel="prefetch" href="/assets/js/172.2113837e.js"><link rel="prefetch" href="/assets/js/173.0880ed96.js"><link rel="prefetch" href="/assets/js/174.21e41c8d.js"><link rel="prefetch" href="/assets/js/175.24057138.js"><link rel="prefetch" href="/assets/js/176.5b75c1f2.js"><link rel="prefetch" href="/assets/js/177.1117a387.js"><link rel="prefetch" href="/assets/js/178.f861ee85.js"><link rel="prefetch" href="/assets/js/179.b994ee8c.js"><link rel="prefetch" href="/assets/js/18.5180f4f8.js"><link rel="prefetch" href="/assets/js/180.c0c010cf.js"><link rel="prefetch" href="/assets/js/181.e984d119.js"><link rel="prefetch" href="/assets/js/182.f8bf953f.js"><link rel="prefetch" href="/assets/js/183.9859029a.js"><link rel="prefetch" href="/assets/js/184.dfcbf4e7.js"><link rel="prefetch" href="/assets/js/185.6d852b91.js"><link rel="prefetch" href="/assets/js/186.2739a188.js"><link rel="prefetch" href="/assets/js/187.9828f8e1.js"><link rel="prefetch" href="/assets/js/188.f0104a26.js"><link rel="prefetch" href="/assets/js/189.e141c6b6.js"><link rel="prefetch" href="/assets/js/19.da294525.js"><link rel="prefetch" href="/assets/js/190.c5bce55c.js"><link rel="prefetch" href="/assets/js/191.0a31f2ed.js"><link rel="prefetch" href="/assets/js/192.c99df1ba.js"><link rel="prefetch" href="/assets/js/193.6774c4ab.js"><link rel="prefetch" href="/assets/js/194.7e9c2ccc.js"><link rel="prefetch" href="/assets/js/195.31822c0f.js"><link rel="prefetch" href="/assets/js/196.8ef27177.js"><link rel="prefetch" href="/assets/js/197.95ce2481.js"><link rel="prefetch" href="/assets/js/198.11537ac5.js"><link rel="prefetch" href="/assets/js/199.f87470d6.js"><link rel="prefetch" href="/assets/js/20.f3f361e9.js"><link rel="prefetch" href="/assets/js/200.6dea4b37.js"><link rel="prefetch" href="/assets/js/201.27e2b3af.js"><link rel="prefetch" href="/assets/js/202.5fb57278.js"><link rel="prefetch" href="/assets/js/203.4b197b72.js"><link rel="prefetch" href="/assets/js/204.02083e58.js"><link rel="prefetch" href="/assets/js/205.f5a0f9ac.js"><link rel="prefetch" href="/assets/js/206.44269b20.js"><link rel="prefetch" href="/assets/js/207.5aa0dc4f.js"><link rel="prefetch" href="/assets/js/208.d5e417b1.js"><link rel="prefetch" href="/assets/js/209.cf4f05c4.js"><link rel="prefetch" href="/assets/js/21.69ebcf70.js"><link rel="prefetch" href="/assets/js/210.2b9041fa.js"><link rel="prefetch" href="/assets/js/211.10483086.js"><link rel="prefetch" href="/assets/js/212.3d0dcb3e.js"><link rel="prefetch" href="/assets/js/213.c84eeba9.js"><link rel="prefetch" href="/assets/js/214.ac472bfc.js"><link rel="prefetch" href="/assets/js/215.a457558a.js"><link rel="prefetch" href="/assets/js/216.d04a28e1.js"><link rel="prefetch" href="/assets/js/217.05aba786.js"><link rel="prefetch" href="/assets/js/218.a863c37a.js"><link rel="prefetch" href="/assets/js/219.7dec7421.js"><link rel="prefetch" href="/assets/js/22.d01326e7.js"><link rel="prefetch" href="/assets/js/220.7098fc50.js"><link rel="prefetch" href="/assets/js/221.6ead8a78.js"><link rel="prefetch" href="/assets/js/222.bb4c0e57.js"><link rel="prefetch" href="/assets/js/223.50b992ec.js"><link rel="prefetch" href="/assets/js/224.1e5b111f.js"><link rel="prefetch" href="/assets/js/225.d64e693b.js"><link rel="prefetch" href="/assets/js/226.5d517cf2.js"><link rel="prefetch" href="/assets/js/227.55a331ee.js"><link rel="prefetch" href="/assets/js/228.9128b32d.js"><link rel="prefetch" href="/assets/js/229.5e71e628.js"><link rel="prefetch" href="/assets/js/23.c9bc0ea6.js"><link rel="prefetch" href="/assets/js/230.6daf681f.js"><link rel="prefetch" href="/assets/js/231.b43ff551.js"><link rel="prefetch" href="/assets/js/232.c87810d8.js"><link rel="prefetch" href="/assets/js/233.b5c0e6b1.js"><link rel="prefetch" href="/assets/js/234.50887b03.js"><link rel="prefetch" href="/assets/js/235.e7299edc.js"><link rel="prefetch" href="/assets/js/236.ebc4838d.js"><link rel="prefetch" href="/assets/js/237.f05278b5.js"><link rel="prefetch" href="/assets/js/238.22017696.js"><link rel="prefetch" href="/assets/js/239.eee224df.js"><link rel="prefetch" href="/assets/js/24.145475ae.js"><link rel="prefetch" href="/assets/js/240.2e401eaf.js"><link rel="prefetch" href="/assets/js/241.13b70c68.js"><link rel="prefetch" href="/assets/js/242.a155eb55.js"><link rel="prefetch" href="/assets/js/243.1fc340b4.js"><link rel="prefetch" href="/assets/js/244.6baa3c2c.js"><link rel="prefetch" href="/assets/js/245.ae2221f8.js"><link rel="prefetch" href="/assets/js/246.5b9919b8.js"><link rel="prefetch" href="/assets/js/247.8510f91e.js"><link rel="prefetch" href="/assets/js/248.bb2b74f8.js"><link rel="prefetch" href="/assets/js/249.fce641b2.js"><link rel="prefetch" href="/assets/js/25.6a4f99dc.js"><link rel="prefetch" href="/assets/js/250.e7fe5642.js"><link rel="prefetch" href="/assets/js/251.200e84f1.js"><link rel="prefetch" href="/assets/js/252.504082ac.js"><link rel="prefetch" href="/assets/js/253.b2ae815e.js"><link rel="prefetch" href="/assets/js/254.a659f7ce.js"><link rel="prefetch" href="/assets/js/255.cb8fc0c9.js"><link rel="prefetch" href="/assets/js/256.50ca9726.js"><link rel="prefetch" href="/assets/js/257.312a0b0b.js"><link rel="prefetch" href="/assets/js/258.9436ae0d.js"><link rel="prefetch" href="/assets/js/259.8a73f3eb.js"><link rel="prefetch" href="/assets/js/26.ef2dc4ec.js"><link rel="prefetch" href="/assets/js/260.c175eaaf.js"><link rel="prefetch" href="/assets/js/261.e45d1c45.js"><link rel="prefetch" href="/assets/js/262.2c7af640.js"><link rel="prefetch" href="/assets/js/263.e98803f0.js"><link rel="prefetch" href="/assets/js/264.5e65aaaf.js"><link rel="prefetch" href="/assets/js/265.5907408c.js"><link rel="prefetch" href="/assets/js/266.269625b8.js"><link rel="prefetch" href="/assets/js/267.20596cc8.js"><link rel="prefetch" href="/assets/js/268.08da84d1.js"><link rel="prefetch" href="/assets/js/269.32fb0463.js"><link rel="prefetch" href="/assets/js/27.9f755ce4.js"><link rel="prefetch" href="/assets/js/270.22929897.js"><link rel="prefetch" href="/assets/js/271.38168464.js"><link rel="prefetch" href="/assets/js/272.37b4706e.js"><link rel="prefetch" href="/assets/js/273.8442069e.js"><link rel="prefetch" href="/assets/js/274.916bc83e.js"><link rel="prefetch" href="/assets/js/275.0b5e477c.js"><link rel="prefetch" href="/assets/js/276.a17d2943.js"><link rel="prefetch" href="/assets/js/277.337f4973.js"><link rel="prefetch" href="/assets/js/278.57963423.js"><link rel="prefetch" href="/assets/js/279.55328580.js"><link rel="prefetch" href="/assets/js/280.64dd2a5f.js"><link rel="prefetch" href="/assets/js/281.4891e50c.js"><link rel="prefetch" href="/assets/js/282.846ccf57.js"><link rel="prefetch" href="/assets/js/283.190b6105.js"><link rel="prefetch" href="/assets/js/284.cea8ab39.js"><link rel="prefetch" href="/assets/js/285.9a736ee4.js"><link rel="prefetch" href="/assets/js/286.baf72b59.js"><link rel="prefetch" href="/assets/js/287.7b9ac8dd.js"><link rel="prefetch" href="/assets/js/288.0f2dd7a3.js"><link rel="prefetch" href="/assets/js/289.b8faf276.js"><link rel="prefetch" href="/assets/js/29.17436273.js"><link rel="prefetch" href="/assets/js/290.123070af.js"><link rel="prefetch" href="/assets/js/291.2b401f90.js"><link rel="prefetch" href="/assets/js/292.6db3d5d0.js"><link rel="prefetch" href="/assets/js/293.1d6573c3.js"><link rel="prefetch" href="/assets/js/294.47e4ae72.js"><link rel="prefetch" href="/assets/js/295.7c84000b.js"><link rel="prefetch" href="/assets/js/296.e8e24597.js"><link rel="prefetch" href="/assets/js/297.d7205379.js"><link rel="prefetch" href="/assets/js/298.7e61917d.js"><link rel="prefetch" href="/assets/js/299.74c88473.js"><link rel="prefetch" href="/assets/js/3.603ed79b.js"><link rel="prefetch" href="/assets/js/30.7dd304de.js"><link rel="prefetch" href="/assets/js/300.f37eea58.js"><link rel="prefetch" href="/assets/js/301.4631b290.js"><link rel="prefetch" href="/assets/js/302.9877edfb.js"><link rel="prefetch" href="/assets/js/303.c6e35854.js"><link rel="prefetch" href="/assets/js/304.297a6bbd.js"><link rel="prefetch" href="/assets/js/305.49bdcf78.js"><link rel="prefetch" href="/assets/js/306.911f0032.js"><link rel="prefetch" href="/assets/js/307.8adbd359.js"><link rel="prefetch" href="/assets/js/308.ebd0b400.js"><link rel="prefetch" href="/assets/js/309.c726441c.js"><link rel="prefetch" href="/assets/js/31.a96ccda1.js"><link rel="prefetch" href="/assets/js/310.669832cf.js"><link rel="prefetch" href="/assets/js/311.33592b74.js"><link rel="prefetch" href="/assets/js/312.d69b7693.js"><link rel="prefetch" href="/assets/js/313.4b36a021.js"><link rel="prefetch" href="/assets/js/314.d4443d12.js"><link rel="prefetch" href="/assets/js/315.d3ee6f19.js"><link rel="prefetch" href="/assets/js/316.b3b3b30b.js"><link rel="prefetch" href="/assets/js/317.2d119d0f.js"><link rel="prefetch" href="/assets/js/318.8c778697.js"><link rel="prefetch" href="/assets/js/319.ad4ed96a.js"><link rel="prefetch" href="/assets/js/32.fe3d52fc.js"><link rel="prefetch" href="/assets/js/320.a390410b.js"><link rel="prefetch" href="/assets/js/321.542130c4.js"><link rel="prefetch" href="/assets/js/322.c4267922.js"><link rel="prefetch" href="/assets/js/323.77757be4.js"><link rel="prefetch" href="/assets/js/324.daf16678.js"><link rel="prefetch" href="/assets/js/325.33dd10ae.js"><link rel="prefetch" href="/assets/js/326.c273ffb9.js"><link rel="prefetch" href="/assets/js/327.d23e6c92.js"><link rel="prefetch" href="/assets/js/328.9fe05464.js"><link rel="prefetch" href="/assets/js/329.c2e2bb00.js"><link rel="prefetch" href="/assets/js/33.c9bdef3b.js"><link rel="prefetch" href="/assets/js/330.4d3443cf.js"><link rel="prefetch" href="/assets/js/331.170d76ad.js"><link rel="prefetch" href="/assets/js/332.8b6a821b.js"><link rel="prefetch" href="/assets/js/333.bf67a2fc.js"><link rel="prefetch" href="/assets/js/334.596a18eb.js"><link rel="prefetch" href="/assets/js/335.a144d9c4.js"><link rel="prefetch" href="/assets/js/336.140fa7ac.js"><link rel="prefetch" href="/assets/js/337.919e8915.js"><link rel="prefetch" href="/assets/js/338.27332e1e.js"><link rel="prefetch" href="/assets/js/339.eac69ce5.js"><link rel="prefetch" href="/assets/js/34.26a8ecb0.js"><link rel="prefetch" href="/assets/js/340.1a08a3b4.js"><link rel="prefetch" href="/assets/js/341.dc797dd8.js"><link rel="prefetch" href="/assets/js/342.16d2339b.js"><link rel="prefetch" href="/assets/js/343.75d6c551.js"><link rel="prefetch" href="/assets/js/344.6386e156.js"><link rel="prefetch" href="/assets/js/345.940f5b3b.js"><link rel="prefetch" href="/assets/js/346.a619d052.js"><link rel="prefetch" href="/assets/js/347.8149efc4.js"><link rel="prefetch" href="/assets/js/348.8eeb7d51.js"><link rel="prefetch" href="/assets/js/349.a28ee355.js"><link rel="prefetch" href="/assets/js/35.8f6a0fad.js"><link rel="prefetch" href="/assets/js/350.50195c3e.js"><link rel="prefetch" href="/assets/js/351.53e64236.js"><link rel="prefetch" href="/assets/js/352.ea5ef117.js"><link rel="prefetch" href="/assets/js/353.98d30cc0.js"><link rel="prefetch" href="/assets/js/354.4cfd132b.js"><link rel="prefetch" href="/assets/js/355.9de4bc87.js"><link rel="prefetch" href="/assets/js/356.c5b444a7.js"><link rel="prefetch" href="/assets/js/357.da7119c9.js"><link rel="prefetch" href="/assets/js/358.948388c9.js"><link rel="prefetch" href="/assets/js/359.2e1d41fa.js"><link rel="prefetch" href="/assets/js/36.7d41991d.js"><link rel="prefetch" href="/assets/js/360.17a86acb.js"><link rel="prefetch" href="/assets/js/361.0cb6669b.js"><link rel="prefetch" href="/assets/js/362.6d214fe9.js"><link rel="prefetch" href="/assets/js/363.2c13518a.js"><link rel="prefetch" href="/assets/js/364.4e062cfb.js"><link rel="prefetch" href="/assets/js/365.435947c8.js"><link rel="prefetch" href="/assets/js/366.9f035f7f.js"><link rel="prefetch" href="/assets/js/367.6f203ad0.js"><link rel="prefetch" href="/assets/js/368.c1208f02.js"><link rel="prefetch" href="/assets/js/369.15864d3a.js"><link rel="prefetch" href="/assets/js/37.3e371222.js"><link rel="prefetch" href="/assets/js/370.983a75b7.js"><link rel="prefetch" href="/assets/js/371.2d158a44.js"><link rel="prefetch" href="/assets/js/372.817b00d9.js"><link rel="prefetch" href="/assets/js/373.a3f7e510.js"><link rel="prefetch" href="/assets/js/374.746fb1ea.js"><link rel="prefetch" href="/assets/js/375.203031ea.js"><link rel="prefetch" href="/assets/js/376.5d2b05ed.js"><link rel="prefetch" href="/assets/js/377.5eae4445.js"><link rel="prefetch" href="/assets/js/378.da2ce54c.js"><link rel="prefetch" href="/assets/js/379.f29578ba.js"><link rel="prefetch" href="/assets/js/38.c0738668.js"><link rel="prefetch" href="/assets/js/380.cf3b8b02.js"><link rel="prefetch" href="/assets/js/381.1e0ee15b.js"><link rel="prefetch" href="/assets/js/382.185b5cec.js"><link rel="prefetch" href="/assets/js/383.81a0df08.js"><link rel="prefetch" href="/assets/js/384.030e03d1.js"><link rel="prefetch" href="/assets/js/385.6b594acc.js"><link rel="prefetch" href="/assets/js/386.35988f53.js"><link rel="prefetch" href="/assets/js/387.dfde1fbc.js"><link rel="prefetch" href="/assets/js/388.f01e5e0a.js"><link rel="prefetch" href="/assets/js/389.d7f8a17c.js"><link rel="prefetch" href="/assets/js/39.17804091.js"><link rel="prefetch" href="/assets/js/390.b1af8b30.js"><link rel="prefetch" href="/assets/js/391.e4e66ab0.js"><link rel="prefetch" href="/assets/js/392.57c61410.js"><link rel="prefetch" href="/assets/js/393.a520da83.js"><link rel="prefetch" href="/assets/js/394.8716ca42.js"><link rel="prefetch" href="/assets/js/395.82adb50b.js"><link rel="prefetch" href="/assets/js/396.c164a3d6.js"><link rel="prefetch" href="/assets/js/397.83d39a0b.js"><link rel="prefetch" href="/assets/js/398.79ccdcfd.js"><link rel="prefetch" href="/assets/js/399.6393c09f.js"><link rel="prefetch" href="/assets/js/4.e4aaf14c.js"><link rel="prefetch" href="/assets/js/40.d443fbde.js"><link rel="prefetch" href="/assets/js/400.2d944fc1.js"><link rel="prefetch" href="/assets/js/401.268b80ff.js"><link rel="prefetch" href="/assets/js/402.c0c3f68c.js"><link rel="prefetch" href="/assets/js/403.083e8b2b.js"><link rel="prefetch" href="/assets/js/404.4e6f0b13.js"><link rel="prefetch" href="/assets/js/405.6ca5515f.js"><link rel="prefetch" href="/assets/js/406.1d726e20.js"><link rel="prefetch" href="/assets/js/407.9061341c.js"><link rel="prefetch" href="/assets/js/408.6417c73d.js"><link rel="prefetch" href="/assets/js/409.9644048b.js"><link rel="prefetch" href="/assets/js/41.56da8377.js"><link rel="prefetch" href="/assets/js/410.6e7cae19.js"><link rel="prefetch" href="/assets/js/411.d10d09d7.js"><link rel="prefetch" href="/assets/js/412.cdd43db1.js"><link rel="prefetch" href="/assets/js/413.e11cac0c.js"><link rel="prefetch" href="/assets/js/414.cc0556d4.js"><link rel="prefetch" href="/assets/js/415.aaaabf3a.js"><link rel="prefetch" href="/assets/js/416.9eb606c4.js"><link rel="prefetch" href="/assets/js/417.43b60a6f.js"><link rel="prefetch" href="/assets/js/418.9555d224.js"><link rel="prefetch" href="/assets/js/419.881f0cd0.js"><link rel="prefetch" href="/assets/js/42.aafff920.js"><link rel="prefetch" href="/assets/js/420.4597f87f.js"><link rel="prefetch" href="/assets/js/421.9e2b7c38.js"><link rel="prefetch" href="/assets/js/422.67f0bcd9.js"><link rel="prefetch" href="/assets/js/423.eeee12da.js"><link rel="prefetch" href="/assets/js/424.c0bc7088.js"><link rel="prefetch" href="/assets/js/425.cd9f2cbe.js"><link rel="prefetch" href="/assets/js/426.9ac3c10a.js"><link rel="prefetch" href="/assets/js/427.8a42bc74.js"><link rel="prefetch" href="/assets/js/428.3206e476.js"><link rel="prefetch" href="/assets/js/429.7a741277.js"><link rel="prefetch" href="/assets/js/43.1187d734.js"><link rel="prefetch" href="/assets/js/430.24df4cca.js"><link rel="prefetch" href="/assets/js/431.c874ea4d.js"><link rel="prefetch" href="/assets/js/432.0640ab82.js"><link rel="prefetch" href="/assets/js/433.6fbad864.js"><link rel="prefetch" href="/assets/js/434.058d3ea0.js"><link rel="prefetch" href="/assets/js/435.65681d99.js"><link rel="prefetch" href="/assets/js/436.b736f166.js"><link rel="prefetch" href="/assets/js/437.ce1622f6.js"><link rel="prefetch" href="/assets/js/438.92578ffd.js"><link rel="prefetch" href="/assets/js/439.dc0236aa.js"><link rel="prefetch" href="/assets/js/44.f063c31f.js"><link rel="prefetch" href="/assets/js/440.67f05464.js"><link rel="prefetch" href="/assets/js/441.41b7084f.js"><link rel="prefetch" href="/assets/js/442.f2e3b7e0.js"><link rel="prefetch" href="/assets/js/443.612cc90b.js"><link rel="prefetch" href="/assets/js/444.0b9b4e2d.js"><link rel="prefetch" href="/assets/js/445.afce98d0.js"><link rel="prefetch" href="/assets/js/446.5b24d043.js"><link rel="prefetch" href="/assets/js/447.42ef4c92.js"><link rel="prefetch" href="/assets/js/448.9b46084b.js"><link rel="prefetch" href="/assets/js/449.9d6a3934.js"><link rel="prefetch" href="/assets/js/45.c903ded3.js"><link rel="prefetch" href="/assets/js/450.0f8f9ef2.js"><link rel="prefetch" href="/assets/js/451.8d0f5935.js"><link rel="prefetch" href="/assets/js/452.26fc5a41.js"><link rel="prefetch" href="/assets/js/453.f98793d9.js"><link rel="prefetch" href="/assets/js/454.b16d5353.js"><link rel="prefetch" href="/assets/js/455.b39e4c52.js"><link rel="prefetch" href="/assets/js/456.f4aeb52c.js"><link rel="prefetch" href="/assets/js/457.a0649f7b.js"><link rel="prefetch" href="/assets/js/458.4d5dd48c.js"><link rel="prefetch" href="/assets/js/459.bdece430.js"><link rel="prefetch" href="/assets/js/46.c390d374.js"><link rel="prefetch" href="/assets/js/460.646bea09.js"><link rel="prefetch" href="/assets/js/461.ce90de7c.js"><link rel="prefetch" href="/assets/js/462.e6dc008e.js"><link rel="prefetch" href="/assets/js/463.92b34dc0.js"><link rel="prefetch" href="/assets/js/464.ae9b121d.js"><link rel="prefetch" href="/assets/js/465.ec51a4b2.js"><link rel="prefetch" href="/assets/js/466.53bc2dcc.js"><link rel="prefetch" href="/assets/js/467.4fb2648c.js"><link rel="prefetch" href="/assets/js/468.757de5f7.js"><link rel="prefetch" href="/assets/js/469.bcc63cd3.js"><link rel="prefetch" href="/assets/js/47.08510b62.js"><link rel="prefetch" href="/assets/js/470.79749bfc.js"><link rel="prefetch" href="/assets/js/471.cfcff67a.js"><link rel="prefetch" href="/assets/js/472.0948aca5.js"><link rel="prefetch" href="/assets/js/473.e01f4aee.js"><link rel="prefetch" href="/assets/js/474.e6854bfd.js"><link rel="prefetch" href="/assets/js/475.268482fe.js"><link rel="prefetch" href="/assets/js/476.20285045.js"><link rel="prefetch" href="/assets/js/477.1fb4dc61.js"><link rel="prefetch" href="/assets/js/478.a3befcb9.js"><link rel="prefetch" href="/assets/js/479.c906251d.js"><link rel="prefetch" href="/assets/js/48.4902dab4.js"><link rel="prefetch" href="/assets/js/480.a09cbcb9.js"><link rel="prefetch" href="/assets/js/481.f86acf95.js"><link rel="prefetch" href="/assets/js/482.a183be6b.js"><link rel="prefetch" href="/assets/js/483.2aa9b501.js"><link rel="prefetch" href="/assets/js/484.8f04826f.js"><link rel="prefetch" href="/assets/js/485.85b00ab2.js"><link rel="prefetch" href="/assets/js/486.4135aa3d.js"><link rel="prefetch" href="/assets/js/487.3c6ee63e.js"><link rel="prefetch" href="/assets/js/488.e149dd3f.js"><link rel="prefetch" href="/assets/js/489.6d8d121d.js"><link rel="prefetch" href="/assets/js/49.14ef8da8.js"><link rel="prefetch" href="/assets/js/490.2ed02952.js"><link rel="prefetch" href="/assets/js/491.451fe7ed.js"><link rel="prefetch" href="/assets/js/492.4ab175c3.js"><link rel="prefetch" href="/assets/js/493.df5db673.js"><link rel="prefetch" href="/assets/js/494.9eb3ced5.js"><link rel="prefetch" href="/assets/js/495.846bee9f.js"><link rel="prefetch" href="/assets/js/496.ac45e9d5.js"><link rel="prefetch" href="/assets/js/497.0b0c163b.js"><link rel="prefetch" href="/assets/js/498.7463bdb2.js"><link rel="prefetch" href="/assets/js/499.c8cd2767.js"><link rel="prefetch" href="/assets/js/5.aafe7d58.js"><link rel="prefetch" href="/assets/js/50.b372e073.js"><link rel="prefetch" href="/assets/js/500.a80fe311.js"><link rel="prefetch" href="/assets/js/501.b7f00511.js"><link rel="prefetch" href="/assets/js/502.5efaabdc.js"><link rel="prefetch" href="/assets/js/503.51e33c2d.js"><link rel="prefetch" href="/assets/js/504.443f35c0.js"><link rel="prefetch" href="/assets/js/505.4a3de994.js"><link rel="prefetch" href="/assets/js/506.1c123db3.js"><link rel="prefetch" href="/assets/js/507.80fb39b7.js"><link rel="prefetch" href="/assets/js/508.d9443a53.js"><link rel="prefetch" href="/assets/js/509.1c88dbd4.js"><link rel="prefetch" href="/assets/js/51.00f566d6.js"><link rel="prefetch" href="/assets/js/510.1485b105.js"><link rel="prefetch" href="/assets/js/511.4e61a2b5.js"><link rel="prefetch" href="/assets/js/512.b4a5b219.js"><link rel="prefetch" href="/assets/js/513.859e20ad.js"><link rel="prefetch" href="/assets/js/514.30b0d04b.js"><link rel="prefetch" href="/assets/js/515.756b5645.js"><link rel="prefetch" href="/assets/js/516.f7bd3293.js"><link rel="prefetch" href="/assets/js/517.24283391.js"><link rel="prefetch" href="/assets/js/518.001b3ed2.js"><link rel="prefetch" href="/assets/js/519.f5d6c625.js"><link rel="prefetch" href="/assets/js/52.066b3496.js"><link rel="prefetch" href="/assets/js/520.11c5349e.js"><link rel="prefetch" href="/assets/js/521.fb4740b7.js"><link rel="prefetch" href="/assets/js/522.e4b69bd1.js"><link rel="prefetch" href="/assets/js/523.98800aa4.js"><link rel="prefetch" href="/assets/js/524.cfab6cb1.js"><link rel="prefetch" href="/assets/js/525.37b9611d.js"><link rel="prefetch" href="/assets/js/526.83b6b08c.js"><link rel="prefetch" href="/assets/js/527.a201969f.js"><link rel="prefetch" href="/assets/js/528.3eda9cdf.js"><link rel="prefetch" href="/assets/js/529.a726f1dc.js"><link rel="prefetch" href="/assets/js/53.6291d653.js"><link rel="prefetch" href="/assets/js/530.00956b53.js"><link rel="prefetch" href="/assets/js/531.d66d63a5.js"><link rel="prefetch" href="/assets/js/532.cddb6cf7.js"><link rel="prefetch" href="/assets/js/533.73d794c1.js"><link rel="prefetch" href="/assets/js/534.e70a7255.js"><link rel="prefetch" href="/assets/js/535.39f01763.js"><link rel="prefetch" href="/assets/js/536.6833727e.js"><link rel="prefetch" href="/assets/js/537.65d661b2.js"><link rel="prefetch" href="/assets/js/538.67397168.js"><link rel="prefetch" href="/assets/js/54.939afea0.js"><link rel="prefetch" href="/assets/js/55.3c96f255.js"><link rel="prefetch" href="/assets/js/56.6ea06ced.js"><link rel="prefetch" href="/assets/js/57.3464fb24.js"><link rel="prefetch" href="/assets/js/58.aff223fa.js"><link rel="prefetch" href="/assets/js/59.8ce1d621.js"><link rel="prefetch" href="/assets/js/6.9978857d.js"><link rel="prefetch" href="/assets/js/60.7b4d749c.js"><link rel="prefetch" href="/assets/js/61.efd288e6.js"><link rel="prefetch" href="/assets/js/62.fc1e8c01.js"><link rel="prefetch" href="/assets/js/63.ceeb7571.js"><link rel="prefetch" href="/assets/js/64.5a6f4e3d.js"><link rel="prefetch" href="/assets/js/65.99a885b8.js"><link rel="prefetch" href="/assets/js/66.fa6ed5d3.js"><link rel="prefetch" href="/assets/js/67.7030dbf9.js"><link rel="prefetch" href="/assets/js/68.32ae31b3.js"><link rel="prefetch" href="/assets/js/69.7b62268d.js"><link rel="prefetch" href="/assets/js/7.69dfec51.js"><link rel="prefetch" href="/assets/js/70.c618087b.js"><link rel="prefetch" href="/assets/js/71.e444a4bd.js"><link rel="prefetch" href="/assets/js/72.26dc612f.js"><link rel="prefetch" href="/assets/js/73.0e0b4474.js"><link rel="prefetch" href="/assets/js/74.b68294cf.js"><link rel="prefetch" href="/assets/js/75.7a49d4ca.js"><link rel="prefetch" href="/assets/js/76.b80bd638.js"><link rel="prefetch" href="/assets/js/77.e99e7e1f.js"><link rel="prefetch" href="/assets/js/78.fcce05aa.js"><link rel="prefetch" href="/assets/js/79.eac6fbfa.js"><link rel="prefetch" href="/assets/js/81.384ed42c.js"><link rel="prefetch" href="/assets/js/82.ced9799f.js"><link rel="prefetch" href="/assets/js/83.28b240d6.js"><link rel="prefetch" href="/assets/js/84.aa95c43d.js"><link rel="prefetch" href="/assets/js/85.cbb9d877.js"><link rel="prefetch" href="/assets/js/86.5152e88f.js"><link rel="prefetch" href="/assets/js/87.99919db0.js"><link rel="prefetch" href="/assets/js/88.62766163.js"><link rel="prefetch" href="/assets/js/89.a730909b.js"><link rel="prefetch" href="/assets/js/90.3cca9f0b.js"><link rel="prefetch" href="/assets/js/91.589cc7d6.js"><link rel="prefetch" href="/assets/js/92.5ca84528.js"><link rel="prefetch" href="/assets/js/93.8c12b188.js"><link rel="prefetch" href="/assets/js/94.4525023a.js"><link rel="prefetch" href="/assets/js/95.cc020341.js"><link rel="prefetch" href="/assets/js/96.b7166e2d.js"><link rel="prefetch" href="/assets/js/97.8aabed77.js"><link rel="prefetch" href="/assets/js/98.da74f780.js"><link rel="prefetch" href="/assets/js/99.29b01f0c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.68ec0790.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7dcbcc26.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="黑豆的博客" class="logo"> <span class="site-name can-hide">黑豆的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://v.douyin.com/xV-8RHTmtUs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入浅出Vue.js/01.html" class="nav-link">
  深入浅出Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue/01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue-router/01.html" class="nav-link">
  VueRouter
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vuex/01.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue3/01.html" class="nav-link">
  Vue3核心剖析
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vue知识点简单梳理/01.html" class="nav-link">
  Vue知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入React技术栈/01.html" class="nav-link">
  深入React技术栈
</a></li><li class="dropdown-subitem"><a href="/front/react/React进阶实践指南/01.html" class="nav-link">
  React进阶实践指南
</a></li><li class="dropdown-subitem"><a href="/front/react/React知识点简单梳理/01.html" class="nav-link">
  React知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          混合开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/混合开发/01.html" class="nav-link">
  混合开发探究
</a></li></ul></li><li class="dropdown-item"><h4>
          TypeScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/ts/极简入门Typescript/01.html" class="nav-link">
  极简入门Typescript
</a></li></ul></li><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/webpack/极简入门webpack/01.html" class="nav-link">
  极简入门
</a></li><li class="dropdown-subitem"><a href="/front/webpack/常见面试题/01.html" class="nav-link">
  常见面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/设计模式/JS设计模式核心原理和应用实践/01.html" class="nav-link">
  JS设计模式核心原理和应用实践
</a></li></ul></li><li class="dropdown-item"><h4>
          基础必备
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/base/html必备/01.html" class="nav-link">
  HTML必备
</a></li><li class="dropdown-subitem"><a href="/front/base/CSS必备/01.html" class="nav-link">
  CSS必备
</a></li><li class="dropdown-subitem"><a href="/front/base/JS基础/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/front/base/JS进阶/01.html" class="nav-link">
  JS进阶
</a></li><li class="dropdown-subitem"><a href="/front/base/JS练习/01.html" class="nav-link">
  JS练习
</a></li><li class="dropdown-subitem"><a href="/front/base/网络基础/01.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-subitem"><a href="/books/JS高级程序设计/01.html" class="nav-link">
  JS高级程序设计
</a></li><li class="dropdown-subitem"><a href="/front/base/浏览器相关基础/01.html" class="nav-link">
  浏览器相关基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Java/JavaBase/01.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/Java/JavaUp/01.html" class="nav-link">
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/Java/JavaWeb/01.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/Java/JavaFrame/01.html" class="nav-link">
  Java框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/入门级算法/01.html" class="nav-link">
  入门级算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见算法/01.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见数据结构/01.html" class="nav-link">
  常见数据结构
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/前端算法与数据结构/01.html" class="nav-link">
  前端算法与数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="电子" class="dropdown-title"><span class="title">电子</span> <span class="arrow down"></span></button> <button type="button" aria-label="电子" class="mobile-dropdown-title"><span class="title">电子</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          STM32
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/STM32四轴飞行器/01.html" class="nav-link">
  STM32四轴飞行器
</a></li></ul></li><li class="dropdown-item"><h4>
          Arduino
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/Arduino墙画机/01.html" class="nav-link">
  Arduino墙画机
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四轴飞行器/01.html" class="nav-link">
  Arduino四轴飞行器
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四足仿生机器人/01.html" class="nav-link">
  Arduino四足仿生机器人
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/heidouya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://v.douyin.com/xV-8RHTmtUs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入浅出Vue.js/01.html" class="nav-link">
  深入浅出Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue/01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue-router/01.html" class="nav-link">
  VueRouter
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vuex/01.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue3/01.html" class="nav-link">
  Vue3核心剖析
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vue知识点简单梳理/01.html" class="nav-link">
  Vue知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入React技术栈/01.html" class="nav-link">
  深入React技术栈
</a></li><li class="dropdown-subitem"><a href="/front/react/React进阶实践指南/01.html" class="nav-link">
  React进阶实践指南
</a></li><li class="dropdown-subitem"><a href="/front/react/React知识点简单梳理/01.html" class="nav-link">
  React知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          混合开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/混合开发/01.html" class="nav-link">
  混合开发探究
</a></li></ul></li><li class="dropdown-item"><h4>
          TypeScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/ts/极简入门Typescript/01.html" class="nav-link">
  极简入门Typescript
</a></li></ul></li><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/webpack/极简入门webpack/01.html" class="nav-link">
  极简入门
</a></li><li class="dropdown-subitem"><a href="/front/webpack/常见面试题/01.html" class="nav-link">
  常见面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/设计模式/JS设计模式核心原理和应用实践/01.html" class="nav-link">
  JS设计模式核心原理和应用实践
</a></li></ul></li><li class="dropdown-item"><h4>
          基础必备
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/base/html必备/01.html" class="nav-link">
  HTML必备
</a></li><li class="dropdown-subitem"><a href="/front/base/CSS必备/01.html" class="nav-link">
  CSS必备
</a></li><li class="dropdown-subitem"><a href="/front/base/JS基础/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/front/base/JS进阶/01.html" class="nav-link">
  JS进阶
</a></li><li class="dropdown-subitem"><a href="/front/base/JS练习/01.html" class="nav-link">
  JS练习
</a></li><li class="dropdown-subitem"><a href="/front/base/网络基础/01.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-subitem"><a href="/books/JS高级程序设计/01.html" class="nav-link">
  JS高级程序设计
</a></li><li class="dropdown-subitem"><a href="/front/base/浏览器相关基础/01.html" class="nav-link">
  浏览器相关基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Java/JavaBase/01.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/Java/JavaUp/01.html" class="nav-link">
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/Java/JavaWeb/01.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/Java/JavaFrame/01.html" class="nav-link">
  Java框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/入门级算法/01.html" class="nav-link">
  入门级算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见算法/01.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见数据结构/01.html" class="nav-link">
  常见数据结构
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/前端算法与数据结构/01.html" class="nav-link">
  前端算法与数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="电子" class="dropdown-title"><span class="title">电子</span> <span class="arrow down"></span></button> <button type="button" aria-label="电子" class="mobile-dropdown-title"><span class="title">电子</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          STM32
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/STM32四轴飞行器/01.html" class="nav-link">
  STM32四轴飞行器
</a></li></ul></li><li class="dropdown-item"><h4>
          Arduino
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/Arduino墙画机/01.html" class="nav-link">
  Arduino墙画机
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四轴飞行器/01.html" class="nav-link">
  Arduino四轴飞行器
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四足仿生机器人/01.html" class="nav-link">
  Arduino四足仿生机器人
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/heidouya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS练习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front/base/JS练习/01.html" class="sidebar-link">运行题</a></li><li><a href="/front/base/JS练习/02.html" class="active sidebar-link">问答题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#_0-1-0-2为什么不等于0-3" class="sidebar-link">0.1+0.2为什么不等于0.3？</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#javascript-创建对象的几种方式" class="sidebar-link">JavaScript 创建对象的几种方式?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#javascript-继承的几种实现方式" class="sidebar-link">JavaScript 继承的几种实现方式?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下对this的理解。" class="sidebar-link">说一下对this的理解。</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#什么是proxy" class="sidebar-link">什么是Proxy?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#事件委托是什么" class="sidebar-link">事件委托是什么?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下你所理解的闭包" class="sidebar-link">说一下你所理解的闭包</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下你所理解的ajax-如何创建一个ajax" class="sidebar-link">说一下你所理解的ajax，如何创建一个ajax?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下你所理解的同源政策" class="sidebar-link">说一下你所理解的同源政策?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#你是如何解决的跨域问题的" class="sidebar-link">你是如何解决的跨域问题的?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#你所理解的javascript的事件循环机制是什么" class="sidebar-link">你所理解的JavaScript的事件循环机制是什么?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下对object-defineproperty-的理解。" class="sidebar-link">说一下对Object.defineProperty()的理解。</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#说一下图片的懒加载和预加载的理解。" class="sidebar-link">说一下图片的懒加载和预加载的理解。</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#请求服务器数据-get和post请求的区别是什么" class="sidebar-link">请求服务器数据，get和post请求的区别是什么?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#reflect对象创建的目的是什么" class="sidebar-link">Reflect对象创建的目的是什么?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#require-模块引入的查找方式" class="sidebar-link">require 模块引入的查找方式?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#观察者模式和发布订阅模式有什么不同" class="sidebar-link">观察者模式和发布订阅模式有什么不同?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#检查数据类型的方法几种-分别是什么" class="sidebar-link">检查数据类型的方法几种，分别是什么?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#谈谈对json的了解。" class="sidebar-link">谈谈对JSON的了解。</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#进行哪些操作会造成内存泄漏" class="sidebar-link">进行哪些操作会造成内存泄漏?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/02.html#谈谈你所理解的函数式编程。" class="sidebar-link">谈谈你所理解的函数式编程。</a></li></ul></li><li><a href="/front/base/JS练习/03.html" class="sidebar-link">手写题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写防抖函数" class="sidebar-link">手写防抖函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写节流函数" class="sidebar-link">手写节流函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写加强版节流" class="sidebar-link">手写加强版节流</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写懒加载" class="sidebar-link">手写懒加载</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写jsonp" class="sidebar-link">手写jsonp</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写ajax" class="sidebar-link">手写ajax</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写call函数" class="sidebar-link">手写call函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写apply函数" class="sidebar-link">手写apply函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写bind函数" class="sidebar-link">手写bind函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写new" class="sidebar-link">手写new</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写instanceof" class="sidebar-link">手写instanceof</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写拷贝" class="sidebar-link">手写拷贝</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#实现柯里化函数" class="sidebar-link">实现柯里化函数</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写一个观察者模式" class="sidebar-link">手写一个观察者模式</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手动实现eventemitter-发布订阅模式" class="sidebar-link">手动实现EventEmitter(发布订阅模式)</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手动实现-object-assign" class="sidebar-link">手动实现 Object.assign</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#js格式化数字-每三位加逗号" class="sidebar-link">js格式化数字(每三位加逗号)</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写数组去重的方法" class="sidebar-link">手写数组去重的方法?</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#基于js实现ajax请求并发请求的控制" class="sidebar-link">基于JS实现Ajax请求并发请求的控制</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写merge合并" class="sidebar-link">手写merge合并</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写aop切片编程" class="sidebar-link">手写AOP切片编程</a></li><li class="sidebar-sub-header"><a href="/front/base/JS练习/03.html#手写geturlparam" class="sidebar-link">手写getUrlParam</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_0-1-0-2为什么不等于0-3"><a href="#_0-1-0-2为什么不等于0-3" class="header-anchor">#</a> 0.1+0.2为什么不等于0.3？</h2> <p>0.1和0.2在转换成二进制后会无限循环，由于标准位数的限制后面多余的位数会被截掉，此时就已经出现了精度的损失，相加后因浮点数小数位的限制而截断的二进制数字在转换为十进制就会变成0.30000000000000004。</p> <h2 id="javascript-创建对象的几种方式"><a href="#javascript-创建对象的几种方式" class="header-anchor">#</a> JavaScript 创建对象的几种方式?</h2> <p>在 JavaScript 中虽然 Object 构造函数或对象字面量都可以用来创建单个对象，但是这些方法都有一个明显的缺点：使用同一个接口创建很多对象，会产生大量的重复代码。为了解决这些问题，对 JavaScript 对象创建的一些理解和总结。</p> <h3 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h3> <p>工厂模式的主要工作原理是用函数来封装创建对象的细节，从而通过调用函数来达到复用的目的。但是它有一个很大的问题就是创建出来的对象无法和某个类型联系起来，它只是简单的封装了复用代码，而没有建立起对象和类型间的关系。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;kobe&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="构造函数模式"><a href="#构造函数模式" class="header-anchor">#</a> 构造函数模式</h3> <p>js 中每一个函数都可以作为构造函数，只要一个函数是通过 new 来调用的，那么我们就可以把它称为构造函数。执行构造函数首先会创建一个对象，然后将对象的原型指向构造函数的 prototype 属性，然后将执行上下文中的 this 指向这个对象，最后再执行整个函数，如果返回值不是对象，则返回新建的对象。因为 this 的值指向了新建的对象，因此我们可以使用 this 给对象赋值。构造函数模式相对于工厂模式的优点是，所创建的对象和构造函数建立起了联系，因此我们可以通过原型来识别对象的类型。但是构造函数存在一个缺点就是，造成了不必要的函数对象的创建，因为在 js 中函数也是一个对象，因此如果对象属性中如果包含函数的话，那么每次我们都会新建一个函数对象，浪费了不必要的内存空间，因为函数是所有的实例都可以通用的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;kobe&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="原型模式"><a href="#原型模式" class="header-anchor">#</a> 原型模式</h3> <p>因为每一个函数都有一个 prototype 属性，这个属性是一个对象，它包含了通过构造函数创建的所有实例都能共享的属性和方法。因此我们可以使用原型对象来添加公用属性和方法，从而实现代码的复用。这种方式相对于构造函数模式来说，解决了函数对象的复用问题。但是这种模式也存在一些问题，一个是没有办法通过传入参数来初始化值，另一个是如果存在一个引用类型如 Array 这样的值，那么所有的实例将共享一个对象，一个实例对引用类型值的改变会影响所有的实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;james&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>job <span class="token operator">=</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;james&quot;</span>

<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;james&quot;</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> person2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="组合使用的构造函数模式和原型模式"><a href="#组合使用的构造函数模式和原型模式" class="header-anchor">#</a> 组合使用的构造函数模式和原型模式</h3> <p>这是创建自定义类型的最常见方式。因为构造函数模式和原型模式分开使用都存在一些问题，因此我们可以组合使用这两种模式，通过构造函数来初始化对象的属性，通过原型对象来实现函数方法的复用。这种方法很好的解决了两种模式单独使用时的缺点，但是有一点不足的就是，因为使用了两种不同的模式，所以对于代码的封装性不够好。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">constructor</span><span class="token operator">:</span> Person<span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;kobe&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;james&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;kobe&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> person2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="动态原型模式"><a href="#动态原型模式" class="header-anchor">#</a> 动态原型模式</h3> <p>这一种模式将原型方法赋值的创建过程移动到了构造函数的内部，通过对属性是否存在的判断，可以实现仅在第一次调用函数时对原型对象赋值一次的效果。这一种方式很好地对上面的混合模式进行了封装。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;james&quot;</span>
</code></pre></div><h3 id="寄生构造函数模式"><a href="#寄生构造函数模式" class="header-anchor">#</a> 寄生构造函数模式</h3> <p>这一种模式和工厂模式的实现基本相同，我对这个模式的理解是，它主要是基于一个已有的类型，在实例化时对实例化的对象进行扩展。这样既不用修改原来的构造函数，也达到了扩展对象的目的。它的一个缺点和工厂模式一样，无法实现对象的识别。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="较为稳妥的构造函数模式"><a href="#较为稳妥的构造函数模式" class="header-anchor">#</a> 较为稳妥的构造函数模式</h3> <p>首先明白稳妥对象指的是没有公共属性，而且其方法也不引用this。稳妥对象最适合在一些安全环境中（这些环境会禁止使用this和new），或防止数据被其他应用程序改动时使用。稳妥构造函数模式和寄生模式类似，有两点不同:一是创建对象的实例方法不引用this，而是不使用new操作符调用构造函数。和寄生构造函数模式一样，这样创建出来的对象与构造函数之间没有什么关系，instanceof操作符对他们没有意义。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment">//创建要返回的对象</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//可以在这里定义私有变量和函数</span>

    <span class="token comment">//添加方法</span>
    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//返回对象</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token keyword">var</span> person1 <span class="token operator">=</span>  <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span>，<span class="token number">9</span>，<span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;james&quot;</span>
</code></pre></div><h2 id="javascript-继承的几种实现方式"><a href="#javascript-继承的几种实现方式" class="header-anchor">#</a> JavaScript 继承的几种实现方式?</h2> <p>继承是面向对象语言中最重要的一个概念。许多面向对象语言都支持两种继承方式：接口继承和实现继承。接口继承只继承方法和签名，而实现继承则继承实际的方法。由于在 JavaScript 中函数没有签名，因此无法实现接口继承，只支持实现继承。</p> <h3 id="原型链继承"><a href="#原型链继承" class="header-anchor">#</a> 原型链继承</h3> <p>原型链继承通过修改子类的原型为父类的实例，从而实现子类可以访问到父类构造函数以及原型上的属性或者方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'sunny'</span>
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 这里也可以直接写出Child.prototype = Parent.prototype</span>
<span class="token comment">// 但是这样就不能访问到父类的构造函数的属性了，即this.name</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
child<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// sunny</span>
</code></pre></div><p>优点： 实现逻辑简单。</p> <p>缺点： 父类构造函数中的引用类型（比如对象/数组），会被所有子类实例共享。其中一个子类实例进行修改，会导致所有其他子类实例的这个值都会改变。</p> <h3 id="构造函数继承"><a href="#构造函数继承" class="header-anchor">#</a> 构造函数继承</h3> <p>构造函数继承其实就是通过修改父类构造函数this实现的继承。我们在子类构造函数中执行父类构造函数，同时修改父类构造函数的this为子类的this。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sunny'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
child<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'rain'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token comment">//{name:[&quot;sunny&quot;,&quot;rain&quot;]}</span>

<span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">)</span><span class="token comment">//{name:[&quot;sunny&quot;]}</span>
</code></pre></div><p>优点： 解决了原型链继承中构造函数引用类型共享的问题，同时可以向构造函数传参（通过call传参）</p> <p>缺点： 所有方法都定义在构造函数中，每次都需要重新创建（对比原型链继承的方式，方法直接写在原型上，子类创建时不需要重新创建方法）</p> <h3 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承</h3> <p>同时结合原型链继承、构造函数继承就是组合继承了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'sunny'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;父类&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'rain'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;child&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 需要重新设置子类的constructor，Child.prototype = new Parent()相当于子类的原型对象完全被覆盖了</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child
<span class="token keyword">var</span> child<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token comment">//{name:&quot;sunny&quot;,text:&quot;rain&quot;}</span>
</code></pre></div><p>优点： 同时解决了构造函数引用类型的问题，同时避免了方法会被创建多次的问题</p> <p>缺点： 父类构造函数被调用了两次。同时子类实例以及子类原型对象上都会存在name属性。虽然根据原型链机制，并不会访问到原型对象上的同名属性，但总归是不完美。</p> <h3 id="寄生组合继承"><a href="#寄生组合继承" class="header-anchor">#</a> 寄生组合继承</h3> <p>寄生组合继承其实就是在组合继承的基础上，解决了父类构造函数调用两次的问题。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'sunny'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;父类&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'rain'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;child&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 仔细看这个函数的实现</span>
<span class="token function">inherit</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> Parent<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> prototype <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> child
  child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype
<span class="token punctuation">}</span>


<span class="token comment">// 这个函数的作用可以理解为复制了一份父类的原型对象</span>
<span class="token comment">// 如果直接将子类的原型对象赋值为父类原型对象</span>
<span class="token comment">// 那么修改子类原型对象其实就相当于修改了父类的原型对象</span>
<span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> child<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Child</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token comment">//{name:&quot;sunny&quot;,&quot;text&quot;:&quot;rain&quot;}</span>
</code></pre></div><p>优点： 这种方式就解决了组合继承中的构造函数调用两次，构造函数引用类型共享，以及原型对象上存在多余属性的问题。是推荐的最合理实现方式（排除ES6的class extends继承哈哈哈）。</p> <p>缺点： 暂时没有啥特别的缺点</p> <h3 id="es6继承"><a href="#es6继承" class="header-anchor">#</a> ES6继承</h3> <p>ES6提供了class语法糖，同时提供了extends用于实现类的继承。这也是项目开发中推荐使用的方式。使用class继承很简单，代码也很直观：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'sunny'</span>
  <span class="token punctuation">}</span>

  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'rain'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
child<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//&quot;sunny&quot;</span>
</code></pre></div><h2 id="说一下对this的理解。"><a href="#说一下对this的理解。" class="header-anchor">#</a> 说一下对this的理解。</h2> <p>this 的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，实际上this的最终指向的是那个调用它的对象。</p> <h3 id="作为普通函数在全局环境中被调用"><a href="#作为普通函数在全局环境中被调用" class="header-anchor">#</a> 作为普通函数在全局环境中被调用</h3> <p>在全局环境里面，this永远指向window，因此在全局环境里作为普通函数被调用的时候，this也指向 window(仅指在浏览器环境下，暂不考虑node)。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;sunny&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//window</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//sunny</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里，fn 其实是作为 window 的一个方法被调用的，而 name 也是 window 的一个属性，因此 fn() 实际上就是 window.fn()。</p> <h3 id="作为对象的属性被调用"><a href="#作为对象的属性被调用" class="header-anchor">#</a> 作为对象的属性被调用</h3> <p>如果函数作为一个对象的属性方法，并且被调用的时候，this 就指向这个对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sayNameWin <span class="token operator">=</span> person<span class="token punctuation">.</span>sayName<span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//person</span>
<span class="token function">sayNameWin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//window   作为 window 的方法被调用的</span>
</code></pre></div><p>在这里，sayName 方法是作为 person 的一个属性方法被调用的，因此指向 person，但是 sayNameWin 方法却是作为 window 的一个属性方法被调用的，因此 console.log 的值是 window。我们再看一个变形。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person1'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person2'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sayName</span><span class="token operator">:</span> person1<span class="token punctuation">.</span>sayName
<span class="token punctuation">}</span>

person2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//person2  作为 person2 的属性方法被调用</span>
</code></pre></div><p>但是当在在对象方法中再定义函数，这时候 this 指向是 window 。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//window对象</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//window</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果想让 this 指向 person 的话，只需要用 that 保存下来 this 的值即可，也可以使用 apply 等改变 this。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// {name: &quot;person&quot;,sayName:F}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//person</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果想让 this 指向 person 的话，只需要用 that 保存下来 this 的值即可，也可以使用 apply 等改变 this。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// {name: &quot;person&quot;,sayName:F}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//person</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="作为构造函数被调用"><a href="#作为构造函数被调用" class="header-anchor">#</a> 作为构造函数被调用</h3> <p>作为构造函数被调用的时候，this 代表它即将 new 出来的对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Person {name: &quot;person&quot;}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//person</span>
</code></pre></div><p>如果不加 new,表示即作为普通函数调用，this指向 window</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//window对象</span>
<span class="token punctuation">}</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//person</span>
</code></pre></div><h3 id="作为-call-apply-bind方法被调用的时候指向传入的值"><a href="#作为-call-apply-bind方法被调用的时候指向传入的值" class="header-anchor">#</a> 作为 call/apply/bind方法被调用的时候指向传入的值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: &quot;person&quot;}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//person</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="严格模式-use-static"><a href="#严格模式-use-static" class="header-anchor">#</a> 严格模式(&quot;use static&quot;)</h3> <p>在严格模式下，在全局环境中执行函数调用的时候 this 并不会指向 window 而是会指向 undefined。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="settimeout、setinterval中的this"><a href="#settimeout、setinterval中的this" class="header-anchor">#</a> setTimeout、setInterval中的this</h3> <p>《 javascript 高级程序设计》中写到：&quot;超时调用的代码都是在全局执行域中执行的&quot;。setTimeout/setInterval 执行的时候，this 默认指向 window 对象，除非手动改变 this 的指向</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'person'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//window对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//window</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sayName<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">var</span> person<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这里如果想改变 this，可是使用 apply/call/bind 等，也可以使用 that 保存 this.
setTimeout 中的回调函数在严格模式下也指向 window 而不是 undefined。因为 setTimeout 的回调函数如果没有指定的 this ，会做一个隐式的操作，将全局上下文注入进去，不管是在严格还是非严格模式下。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//windowd对象</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="构造函数-prototype-属性"><a href="#构造函数-prototype-属性" class="header-anchor">#</a> 构造函数 prototype 属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'person'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Person {name: &quot;person&quot;}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// person</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 Person.prototype.sayName 函数中，this 指向的 person 对象。即便是在整个原型链中,this 也代表当前对象的值。</p> <h3 id="eval函数"><a href="#eval函数" class="header-anchor">#</a> eval函数</h3> <p>在 eval 中，this指向当前作用域的对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;console.log(this.name)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//person</span>
    
<span class="token keyword">var</span> getNameWin<span class="token operator">=</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">;</span>
<span class="token function">getNameWin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//window</span>

<span class="token comment">// 在这里，和不使用 Eval ，作为对象的方法调用的时候得出的结果是一样的。</span>
</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p>它里面的this是由外层作用域来决定的，且指向函数定义时的this而非执行时。因为箭头函数没有 this，因此它自身不能进行new实例化，同时也不能使用 call, apply, bind 等方法来改变 this 的指向。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//{name: &quot;person&quot;,sayName:F}</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//person</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="什么是proxy"><a href="#什么是proxy" class="header-anchor">#</a> 什么是Proxy?</h2> <p>Proxy 用于修改某些操作的默认行为，等同于在语言层面做出修改，所以属于一种“元编程”（meta programming），即对编程语言进行编程。
Proxy 可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy 这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">setting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码对一个空对象架设了一层拦截，重定义了属性的读取（get）和设置（set）行为。这里暂时先不解释具体的语法，只看运行结果。对设置了拦截行为的对象obj，去读写它的属性，就会得到下面的结果。</p> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment">//  setting count!</span>
<span class="token operator">++</span>obj<span class="token punctuation">.</span>count
<span class="token comment">//  getting count!</span>
<span class="token comment">//  setting count!</span>
<span class="token comment">//  2</span>
</code></pre></div><p>上面代码说明，Proxy 实际上重载（overload）了点运算符，即用自己的定义覆盖了语言的原始定义。
ES6 原生提供 Proxy 构造函数，用来生成 Proxy 实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Proxy 对象的所有用法，都是上面这种形式，不同的只是handler参数的写法。其中，new Proxy()表示生成一个Proxy实例，target参数表示所要拦截的目标对象，handler参数也是一个对象，用来定制拦截行为。
下面是另一个拦截读取属性行为的例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">35</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

proxy<span class="token punctuation">.</span>time <span class="token comment">// 35</span>
proxy<span class="token punctuation">.</span>name <span class="token comment">// 35</span>
proxy<span class="token punctuation">.</span>title <span class="token comment">// 35</span>
</code></pre></div><p>上面代码中，作为构造函数，Proxy接受两个参数。第一个参数是所要代理的目标对象（上例是一个空对象），即如果没有Proxy的介入，操作原来要访问的就是这个对象；第二个参数是一个配置对象，对于每一个被代理的操作，需要提供一个对应的处理函数，该函数将拦截对应的操作。比如，上面代码中，配置对象有一个get方法，用来拦截对目标对象属性的访问请求。get方法的两个参数分别是目标对象和所要访问的属性。可以看到，由于拦截函数总是返回35，所以访问任何属性都得到35。
注意，要使得Proxy起作用，必须针对Proxy实例（上例是proxy对象）进行操作，而不是针对目标对象（上例是空对象）进行操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">;</span>
target<span class="token punctuation">.</span>a <span class="token comment">// &quot;b&quot;</span>
</code></pre></div><p>如果handler没有设置任何拦截，那就等同于直接通向原对象。</p> <h2 id="事件委托是什么"><a href="#事件委托是什么" class="header-anchor">#</a> 事件委托是什么?</h2> <p>事件委托，通俗地来讲，就是把一个元素响应事件（click、keydown......）的函数委托到另一个元素；一般来讲，会把一个或者一组元素的事件委托到它的父层或者更外层元素上，真正绑定事件的是外层元素，当事件响应到需要绑定的元素上时，会通过事件冒泡机制从而触发它的外层元素的绑定事件上，然后在外层元素上去执行函数。</p> <p>举个例子，比如一个宿舍的同学同时快递到了，一种方法就是他们都傻傻地一个个去领取，还有一种方法就是把这件事情委托给宿舍长，让一个人出去拿好所有快递，然后再根据收件人一一分发给每个宿舍同学；在这里，取快递就是一个事件，每个同学指的是需要响应事件的 DOM 元素，而出去统一领取快递的宿舍长就是代理的元素，所以真正绑定事件的是这个元素，按照收件人分发快递的过程就是在事件执行中，需要判断当前响应的事件应该匹配到被代理元素中的哪一个或者哪几个。</p> <p>事件冒泡:</p> <p>前面提到 DOM 中事件委托的实现是利用事件冒泡的机制，那么事件冒泡是什么呢？
在 document.addEventListener 的时候我们可以设置事件模型：事件冒泡、事件捕获，一般来说都是用事件冒泡的模型；</p> <p><img src="/assets/img/7.53768502.png" alt="">
如上图所示，事件模型是指分为三个阶段：</p> <p>捕获阶段：在事件冒泡的模型中，捕获阶段不会响应任何事件；</p> <p>目标阶段：目标阶段就是指事件响应到触发事件的最底层元素上；</p> <p>冒泡阶段：冒泡阶段就是事件的触发响应会从最底层目标一层层地向外到最外层（根节点），事件代理即是利用事件冒泡的机制把里层所需要响应的事件绑定到外层；</p> <p>优点: 使用事件代理我们可以不必要为每一个子元素都绑定一个监听事件，这样减少了内存上的消耗。并且使用事件代理我们还可以实现事件的动态绑定，比如说新增了一个子节点，我们并不需要单独地为它添加一个监听事件，它所发生的事件会交给父元素中的监听函数来处理。</p> <p>实际用例:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> oBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    oBox<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Event对象提供了一个属性叫target，可以返回事件的目标节点</span>
      <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
      <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">case</span> <span class="token string">'add'</span> <span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'添加'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">'remove'</span> <span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'删除'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">'move'</span> <span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'移动'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">'select'</span> <span class="token operator">:</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'选择'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">eventDelegate</span> <span class="token punctuation">(</span><span class="token parameter">parentSelector<span class="token punctuation">,</span> targetSelector<span class="token punctuation">,</span> events<span class="token punctuation">,</span> foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 触发执行的函数</span>
  <span class="token keyword">function</span> <span class="token function">triFunction</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 兼容性处理</span>
    <span class="token keyword">var</span> event <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>

    <span class="token comment">// 获取到目标阶段指向的元素</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target <span class="token operator">||</span> event<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>

    <span class="token comment">// 获取到代理事件的函数</span>
    <span class="token keyword">var</span> currentTarget <span class="token operator">=</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">;</span>

    <span class="token comment">// 处理 matches 的兼容性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>matches <span class="token operator">=</span>
        <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>matchesSelector <span class="token operator">||</span>
        <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>mozMatchesSelector <span class="token operator">||</span>
        <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>msMatchesSelector <span class="token operator">||</span>
        <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>oMatchesSelector <span class="token operator">||</span>
        <span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>webkitMatchesSelector <span class="token operator">||</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> matches <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>
            i <span class="token operator">=</span> matches<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> matches<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token keyword">return</span> i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 遍历外层并且匹配</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>target <span class="token operator">!==</span> currentTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 判断是否匹配到我们所需要的元素上</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>targetSelector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> sTarget <span class="token operator">=</span> target<span class="token punctuation">;</span>
        <span class="token comment">// 执行绑定的函数，注意 this</span>
        <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>sTarget<span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      target <span class="token operator">=</span> target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 如果有多个事件的话需要全部一一绑定事件</span>
  events<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 多个父层元素的话也需要一一绑定</span>
    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>parentSelector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> triFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关于事件委托更详细的介绍可以看下这篇博客 <a href="https://www.cnblogs.com/liugang-vip/p/5616484.html" target="_blank" rel="noopener noreferrer">js中的事件委托或是事件代理详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="说一下你所理解的闭包"><a href="#说一下你所理解的闭包" class="header-anchor">#</a> 说一下你所理解的闭包</h2> <p>函数执行会形成一个私有上下文，如果上下文中的某些内容(一般指的是堆内存地址)被上下文以外的一些事物(例如:变量/事件绑定等)所占用，则当前上下文不能被出栈释放「浏览器的垃圾回收机制GC所决定的」</p> <p>“闭包”的机制:形成一个不被释放的上下文</p> <p>保护：保护私有上下文中的“私有变量”和外界互不影响</p> <p>保存：上下文不被释放，那么上下文中的“私有变量”和“值”都会被保存起来，可以供其下级上下文中使用</p> <p>弊端：如果大量使用闭包，会导致栈内存太大，页面渲染变慢，性能受到影响，所以真实项目中需要“合理应用闭包”；某些代码会导致栈溢出或者内存泄漏，这些操作都是需要我们注意的；</p> <p>实现闭包的条件：
• 函数嵌套着函数
• 子函数引用父函数的变量或参数
• 子函数被外界所引用
• 父级就形成了闭包环境(父级的执行栈不会被销毁)，父级的参数或是变量不会被浏览器垃圾机制给强制回收
• 此时打印父级的函数返回值，会出现scopes下有个closure===&gt;闭包</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//正规闭包的模式</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> ff<span class="token operator">=</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//fn就成了闭包环境(执行栈不会被销毁)</span>
<span class="token comment">//fn中的参数或是变量不会被浏览器垃圾机制给强制回收</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>ff<span class="token punctuation">)</span><span class="token comment">//scopes下里面有closure(闭包)</span>
<span class="token comment">//浏览器关闭时才会销毁。</span>
<span class="token comment">//或重新赋值为null才会销毁。</span>
<span class="token comment">//ff()会存储现在的值并会累计相加。</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p> <h2 id="说一下你所理解的ajax-如何创建一个ajax"><a href="#说一下你所理解的ajax-如何创建一个ajax" class="header-anchor">#</a> 说一下你所理解的ajax，如何创建一个ajax?</h2> <p>浏览器与服务器之间，采用http协议通信。用户在浏览器地址栏中输入一个网址或者通过网页表单向服务器提交内容，这时浏览器就会向服务器发送http请求。
1999年，微软公司发布IE浏览器5.0版，第一次引入新功能：允许JavaScript脚本向服务器发起http请求。这个功能当时并没有引起注意，直到2004年Gmail发布和2005年Goole Map发布，才引起广泛关注。2005年2月，ajax这一个词第一次正式提出，它是 Asynchronous JavaScript and XML 的缩写，指的是通过JavaScript的异步通信，从服务器获取XML文档从中提取数据，在更新当前网页的对应部分，而不用刷新整个网页。后来，ajax这个词就成为JavaScript脚本发起http通信的代名词，也就是说，只要用脚本发起通信，就可以叫做ajax通信。W3C也在2006年发布了它的国际标准。</p> <p>具体来说，ajax包括以下几个步骤：</p> <ul><li>创建 XMLHttpRequest 实例对象</li> <li>发出 HTTP 请求</li> <li>接收服务器传回的数据</li> <li>更新网页数据
概括起来，就是一句话：ajax通过原生的 XMLHttpRequest 对象发出http请求，得到服务器返回的数据后在进行处理。现在，服务器返回的都是json格式的数据，xml格式已经过时了，但是ajax这个名字已经成了一个通用名词，字面含义已经消失了。
XMLHttpRequest对象 是ajax的主要接口，用于浏览器于服务器之间的通信。尽管名字里面有 XML和HTTP ，它实际上可以使用多种协议(比如 file或者ftp )，发送任何格式的数据(包括字符串和二进制)。</li></ul> <p>创建一个ajax的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">SERVER_URL</span> <span class="token operator">=</span> <span class="token string">&quot;/server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建 Http 请求</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置状态监听函数</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 当请求成功时</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 设置请求失败时的监听函数</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 设置请求头信息</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送 Http 请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




<span class="token comment">// promise 封装实现：</span>

<span class="token keyword">function</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个 promise 对象</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 新建一个 http 请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置状态的监听函数</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      <span class="token comment">// 当请求成功或失败时，改变 promise 的状态</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置错误监听函数</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置响应的数据类型</span>
    xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置请求头信息</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 发送 http 请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="说一下你所理解的同源政策"><a href="#说一下你所理解的同源政策" class="header-anchor">#</a> 说一下你所理解的同源政策?</h2> <p>同源策略的概念：同源策略 是一种出于浏览器安全方面的考虑而出台的一种策略，它可以保证用户信息的安全，防止恶意的网站窃取。同源策略只允许于与本域下的接口交互，不同源的客户端脚本在没有明确授权的情况下，不能读写对方的资源。</p> <p>同源指的是：同协议 同域名 同端口</p> <p><img src="/assets/img/2.7366a196.png" alt=""></p> <p>同源政策主要限制了三个方面：</p> <ul><li>当前域下的js脚本不能够访问其他域下的cookie、localStorage和indexDB</li> <li>当前域下的js脚本不能够访问和操作其他域下的DOM和js对象</li> <li>当前域下 ajax 无法发送跨域请求</li></ul> <h2 id="你是如何解决的跨域问题的"><a href="#你是如何解决的跨域问题的" class="header-anchor">#</a> 你是如何解决的跨域问题的?</h2> <h2 id="你所理解的javascript的事件循环机制是什么"><a href="#你所理解的javascript的事件循环机制是什么" class="header-anchor">#</a> 你所理解的JavaScript的事件循环机制是什么?</h2> <p>javascript是一门单线程语言，在最新的HTML5中提出了Web-Worker，但javascript是单线程这一核心仍未改变。所以一切javascript版的&quot;多线程&quot;都是用单线程模拟出来的，一切javascript多线程都是纸老虎！
需要注意的是：JavaScript 是一门单线程语言，异步操作都是放到事件循环队列里面，等待主执行栈来执行的，并没有专门的异步执行线程。</p> <p>在解释事件循环之前首先先解释一下浏览器的执行线程：
浏览器是多进程的，浏览器每一个 tab 标签都代表一个独立的进程，其中浏览器渲染进程（浏览器内核）属于浏览器多进程中的一种，主要负责页面渲染，脚本执行，事件处理等
其包含的线程有：GUI 渲染线程（负责渲染页面，解析 HTML，CSS 构成 DOM 树）、JS 引擎线程、事件触发线程、定时器触发线程、http 请求线程等主要线程.</p> <h3 id="关于执行中的线程"><a href="#关于执行中的线程" class="header-anchor">#</a> 关于执行中的线程</h3> <p>主线程：也就是 js 引擎执行的线程，这个线程只有一个，页面渲染、函数处理都在这个主线程上执行。
工作线程：也称幕后线程，这个线程可能存在于浏览器或js引擎内，与主线程是分开的，处理文件读取、网络请求等异步事件。</p> <h3 id="任务队列"><a href="#任务队列" class="header-anchor">#</a> 任务队列</h3> <p>所有的任务可以分为同步任务和异步任务，同步任务，顾名思义，就是立即执行的任务，同步任务一般会直接进入到主线程中执行；而异步任务，就是异步执行的任务，比如ajax网络请求，setTimeout 定时函数等都属于异步任务，异步任务会通过任务队列的机制(先进先出的机制)来进行协调。</p> <p>可以用图片具体的说明：</p> <p><img src="/assets/img/3.e1579f31.png" alt=""></p> <p>同步和异步任务分别进入不同的执行环境，同步的进入主线程，即主执行栈，异步的进入任务队列。主线程内的任务执行完毕为空，会去任务队列读取对应的任务，推入主线程执行。 上述过程的不断重复就是我们说的 Event Loop (事件循环)。</p> <p>在事件循环中，每进行一次循环操作称为 tick，通过阅读规范可知，每一次 tick 的任务处理模型是比较复杂的，其关键的步骤可以总结如下：</p> <ol><li>在此次 tick 中选择最先进入队列的任务( oldest task )，如果有则执行</li> <li>检查是否存在 Microtasks ，如果存在则不停地执行，直至清空Microtask Queue</li> <li>更新 render</li> <li>主线程重复执行上述步骤</li></ol> <p>可以用一张图来说明流程</p> <p><img src="/assets/img/4.c4ff57b7.png" alt=""></p> <p>这里相信有人会想问，什么是 microtasks ?规范中规定，task分为两大类, 分别是 Macro Task （宏任务）和 Micro Task（微任务）, 并且每个宏任务结束后, 都要清空所有的微任务,这里的 Macro Task也是我们常说的 task 。</p> <p>宏任务主要包含：script( 整体代码)、setTimeout、setInterval、I/O、UI 交互事件、setImmediate(Node.js 环境)</p> <p>微任务主要包含：Promise、MutaionObserver、process.nextTick(Node.js 环境)</p> <p>setTimeout/Promise 等API便是任务源，而进入任务队列的是由他们指定的具体执行任务。来自不同任务源的任务会进入到不同的任务队列。其中 setTimeout 与 setInterval 是同源的。</p> <h2 id="说一下对object-defineproperty-的理解。"><a href="#说一下对object-defineproperty-的理解。" class="header-anchor">#</a> 说一下对Object.defineProperty()的理解。</h2> <h2 id="说一下图片的懒加载和预加载的理解。"><a href="#说一下图片的懒加载和预加载的理解。" class="header-anchor">#</a> 说一下图片的懒加载和预加载的理解。</h2> <p>什么叫做懒加载?</p> <p>懒加载也叫延迟加载，指的是在长网页中延迟加载图像，是一种很好优化网页性能的方式。用户滚下哦那个到它们之前，可视区域外的图像不会加载。这与图像预加载相反，在长网页上使用延迟加载将使网页加载更快。在某些情况下，它还可以帮助减少服务器负载。适用于图片很多，页面很长的电商网站场景中。</p> <p>为什么要用懒加载?</p> <ul><li>能提升用户的体检。不妨设想下，用户打开像手机淘宝长页面的时候，如果页面上所有的图片都需要加载，由于图片数目较大，等待时间很长，用户难免会心生抱怨，这就严重影响用户体验</li> <li>减少无效资源的加载，这样能明显减少服务器的压力和流量，也能够减少浏览器的负担</li> <li>防止并发加载的资源过多会阻塞js的加载，影响网站的正常使用。</li></ul> <p>懒加载的原理：</p> <p>首先将页面上的图片的src属性设为空字符串，而图片的真实路径则设置在 data-original 属性中，当页面滚动的时候需要去监听scroll事件，在scroll事件的回调中，判断我们的懒加载的图片是否进入可视区域，如果图片在可视区域就将鱼片的src属性设置为data-original的值，这样就可以实现延迟加载</p> <p>懒加载实现步骤:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Lazyload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.image-item</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
            <span class="token comment">/* 一定记得设置图片高度 */</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/1.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/2.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/3.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/4.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/5.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/6.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/7.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/8.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/9.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/10.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/11.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazyload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-original</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>images/12.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">var</span> viewHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token comment">//获取可视区高度</span>
        <span class="token keyword">function</span> <span class="token function">lazyload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> eles <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-original][lazyload]'</span><span class="token punctuation">)</span>
            <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>eles<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> rect
                <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>original <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
                rect <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 用于获得页面中某个元素的左，上，右和下分别相对浏览器视窗的位置</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> viewHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        img<span class="token punctuation">.</span>src <span class="token operator">=</span> item<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>original
                        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            item<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>src
                        <span class="token punctuation">}</span>
                        item<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-original&quot;</span><span class="token punctuation">)</span><span class="token comment">//移除属性，下次不再遍历</span>
                        item<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;lazyload&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">lazyload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//刚开始还没滚动屏幕时，要先触发一次函数，初始化首页的页面图片</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> lazyload<span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>什么是预加载?</p> <p>资源预加载是另一个性能优化技术，我们可以使用该技术来预先告知浏览器某些资源可能在将来会被用到。预加载简单来说就是将所有所需的资源提前请求加载到本地，这样后面在需要用到的时候直接从缓存取出资源。</p> <p>为什么要用预加载?</p> <p>在网页全部加载之前，对一些主要内容进行加载，以提供给用户更好的体验，减少等待的事件。否则，如果一个页面的内容过于庞大，没有使用预加载技术的页面就会长时间的展现一片空白，直到所有内容加载完毕。</p> <p>实现预加载的几种办法:</p> <ul><li>使用HTML标签</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://hbimg.huabanimg.com/39b716cc64cd7af2131043b50b427d3597249020bbc34-wPobUM_fw236/format/webp<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>使用image对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><ul><li>使用PreloadJS库</li></ul> <p>PreloadJS提供了一种预加载内容的一致方式，以便在HTML应用程序中使用。预加载可以使用HTML标签以及XHR来完成。默认情况下，PreloadJS会尝试使用XHR加载内容，因为它提供了对进度和完成事件的更好支持，但是由于跨域问题，使用基于标记的加载可能会更好。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createjs<span class="token punctuation">.</span>LoadQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认是xhr对象，如果是new createjs.LoadQueue(false)是指使用HTML标签，可以跨域</span>
queue<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;complete&quot;</span><span class="token punctuation">,</span> handleComplete<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">loadManifest</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;myImage&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&quot;http://hbimg.huabanimg.com/39b716cc64cd7af2131043b50b427d3597249020bbc34-wPobUM_fw236/format/web&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;myImage2&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&quot;http://hbimg.huabanimg.com/39b716cc64cd7af2131043b50b427d3597249020bbc34-wPobUM_fw236/format/web&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> image <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">getResuLt</span><span class="token punctuation">(</span><span class="token string">&quot;myImage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>两者方式都是提高页面性能有效的方法，两者主要区别是一个是迟缓甚至不加载，一个是提前加载。懒加载对服务器前端有一定的缓解压力作用，预加载则会增加服务器前端压力。</p> <h2 id="请求服务器数据-get和post请求的区别是什么"><a href="#请求服务器数据-get和post请求的区别是什么" class="header-anchor">#</a> 请求服务器数据，get和post请求的区别是什么?</h2> <p>两者的联系：</p> <p>get和post是http请求的两种方式，底层都是用TCP/IP协议进行通信的。用户发出HTTP请求的大致过程：
用户使用电脑(或手机)发出请求，此时电脑(或手机)就是一个客户端，有自己的ip，通过socket将请求包发出请求数据包会通过TCP协议，通过网络传输给远程服务端ip，服务端ip收到请求包之后，解析并处理请求包最后服务端会通过TCP协议将处理结果返回给客户端ip，用户可以查看到想要的响应数据。</p> <p>get和post本质并无区别，只是被http规定了不同的行为和方式。之所以有get和post区分，是因为它们底层数据的传输都是基于TCP协议，如果不做区分，网络中都是某一种服务类别，难免会混乱。为了避免这种情况发生，http协议诞生了。</p> <p>HTTP给网络运输设定了好几个服务类别，有GET\POST\PUT\DELETE等，HTTP规定，当执行GET请求的时候，要给请求包贴上GET的标签(设置method为GET),而且要求把传送的数据放在url中来方便记录。如果是POST请求，在请求包贴上POST的标签</p> <p>两者区别：</p> <ul><li>get请求在浏览器后退时无害，不发送请求。post在浏览器后退时会再次发送请求</li> <li>get参数通常放在url后面传递，post则通常放在Request body中传递。但实际上，get也可以用body少量传值，post也可以在url中少量传值，这在技术上是完全行的通的，只是不符合http的规定</li> <li>get比post更不安全，因为参数直接暴露在URL中，所以不能用来传递敏感信息</li> <li>get在url中传输参数有长度限制，post没有。get之所以会限制请求长度，是因为url请求数据量太大对浏览器和服务器都是很大的负担，处理起来有成本，所以浏览器和服务器对单次访问都做了限制。(大多数)浏览器通常会限制url长度在2K个字节,而(大多数)服务器最多处理64K大小的url。超过的部分，概不处理。虽然get可以带request body，也不保证一定被接收到。所以此处的不同，是因为http的规定和浏览器/服务器的限制，导致它们在应用过程中体现出一些不同。所以如果请求参数可能很长很多的话，直接使用post就可以啦(如果用get超过限制，参数传不过去，会报null)!</li> <li>get产生一个TCP数据包，post产生两个TCP数据包。对于get方式的请求，浏览器会把http header和data一并发送出去，服务器响应200(返回数据)；而对于post，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok(返回数据)。也就是post请求，第一次将header发送过去，确认服务器和网络没问题可以服务，才会将真正的data数据提交。因为post需要两步，时间上消耗的要多一些，看起来get比post更有效。</li></ul> <p>所以Yahoo团队有推荐用get替换post来优化网站性能。但是这个是一个坑，需要谨慎对待，为什么呢?解释原因如下：</p> <p>get和post都有自己的语义，不能随便混用。get从指定的支援获取数据，post是向指定的资源提交数据(使用场景上面的不同)</p> <p>在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。也就是网络好的话get和post请求效率基本一样，网络不好的时候post对验证请求数据完整性更有优势</p> <p>并不是所有浏览器都会在post中发送两次包，常用的Firefox就只发送一次</p> <h2 id="reflect对象创建的目的是什么"><a href="#reflect对象创建的目的是什么" class="header-anchor">#</a> Reflect对象创建的目的是什么?</h2> <ol><li>将Object对象的一些明显属于语言内部的方法(比如Object.defineProperty)，放在Reflect对象上。现阶段，某些方法同时在Object和Reflect对象上部署，未来的新方法将只部署在Reflect对象上。也就是说，从Reflect对象上可以拿到语言内部的方法</li> <li>修改某些Object方法的返回结果，让其变得更合理。比如，Object.defineProperty(obj,name,desc)在无法定义属性时，会抛出一个错误，而Reflect.defineProperty(obj,name,desc)则会返回false</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//老写法</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>property<span class="token punctuation">,</span>attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//successs</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//failure</span>
<span class="token punctuation">}</span>
<span class="token comment">//新写法</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>property<span class="token punctuation">,</span>attributes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//success</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
  <span class="token comment">//failure</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>让Object操作都变成函数行为。某些Object操作是命令式，比如name in obj 和 delete obj[name],而Reflect.has(obj,name)和Reflect.deleteProperty(obj,name)让它们变成了函数行为。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//老写法</span>
<span class="token string">'assign'</span> <span class="token keyword">in</span> Object <span class="token comment">//true</span>
<span class="token comment">//新写法</span>
Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span><span class="token string">'assign'</span><span class="token punctuation">)</span><span class="token comment">//true</span>
</code></pre></div><ol start="4"><li>Reflect 对象的方法与Proxy对象的方法一一对应，只要是Proxy对象的方法，就能在Reflect对象上找到对应的方法。这就让Proxy对象可以方便地调用对应的Reflect方法，完成默认行为，作为修改行为的基础。也就是说，不管Proxy怎么修改默认行为，你总可以在Reflect上获取默认行为。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>name<span class="token punctuation">,</span>value<span class="token punctuation">,</span>receiver</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> success<span class="token operator">=</span>Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">,</span>value<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'property'</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">'on'</span><span class="token operator">+</span>target<span class="token operator">+</span><span class="token string">'set to '</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> success；
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，Proxy方法拦截target对象的属性赋值行为。它采用Reflect.set方法将值赋值给对象的属性，确保完成原有的行为，然后再部署额外的功能。举另一个栗子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> loggedObj<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'delete'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">has</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'has'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，每一个Proxy对象的拦截操作(get、delete、has),内部都调用对应的Reflect方法，保证原生行为能够正常执行。添加的工作，就是将每一个操作输出一行日志。</p> <p>有了Reflect对象之后，很多操作会更易读。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//老写法</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>floor<span class="token punctuation">,</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1.75</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//1</span>
<span class="token comment">//新写法</span>
<span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>floor<span class="token punctuation">,</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1.75</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//1</span>
</code></pre></div><h2 id="require-模块引入的查找方式"><a href="#require-模块引入的查找方式" class="header-anchor">#</a> require 模块引入的查找方式?</h2> <p>当Node遇到require(X)时，按照下面的顺序处理:</p> <ol><li>如果 X 是内置模块(比如 require('http'));
<ul><li>返回该模块</li> <li>不再继续执行</li></ul></li> <li>如果X以&quot;./&quot;或者&quot;/&quot;或者&quot;../&quot;开头
<ul><li>根据X所在的父模块，确定X的绝对路径</li> <li>将X当成文件，依次查找下面文件，只要其中一个存在，就返回该文件，不再继续执行。
X
X.js
X.json
X.node</li> <li>将X当成目录，依次查找下面文件，只要其中有一个存在就返回该文件，不再继续执行
X/package.json (main字段)
X/index.js
X/index.json
X/index.node</li></ul></li> <li>如果X不带路径
<ul><li>根据X所在的父模块，确定X可能的安装目录</li> <li>依次在每个目录中，将X当成文件或目录名加载</li></ul></li> <li>抛出 &quot;not found&quot;</li></ol> <h2 id="观察者模式和发布订阅模式有什么不同"><a href="#观察者模式和发布订阅模式有什么不同" class="header-anchor">#</a> 观察者模式和发布订阅模式有什么不同?</h2> <h3 id="观察者模式"><a href="#观察者模式" class="header-anchor">#</a> 观察者模式</h3> <p>所谓观察者模式，其实就是为了实现松耦合(loosely coupled)
对于观察者模式，我们仅需要维护一个可观察对象即可，即一个Observable实例，当数据变化时，它只需维护一套观察者(Observer)的集合，这些Observer实现相同的接口，Subject只需要知道，通知Observer时，需要调用哪一个统一方法就好啦。</p> <p><img src="/assets/img/5.66406b8a.png" alt=""></p> <h3 id="发布订阅模式"><a href="#发布订阅模式" class="header-anchor">#</a> 发布订阅模式</h3> <p>在发布订阅模式里，发布者并不直接通知订阅者。换句话说：发布者和订阅者彼此互不认识。那么的话是怎样进行交流的呢?
答案是：通过第三者触发，也就是在消息队列里，发布者和订阅者通过事件名称来联系，匹配上后直接执行对应订阅者的方法即可。</p> <p><img src="/assets/img/6.67abe240.png" alt=""></p> <p>发布/订阅者模式与观察者模式主要有以下几个不同点：</p> <p>在观察者模式中，主体维护观察者列表，因此主体(被观察者)知道当状态发生变化时如何通知观察者。然而，在发布/订阅者中，发布者和订阅者不需要相互了解。它们只需在中间层消息代理(或消息队列)的帮助下进行通信。</p> <p>在发布/订阅者模式中，组件与观察者模式完全分离。在观察者模式中，主体和观察者松散耦合。</p> <p>观察者模式主要是以 同步方式 实现的，即当发生某些事件时，主体调用其所有观察者的适当方法。发布/订阅服务器模式主要是以 异步方式 实现(使用消息队列)</p> <p>发布/订阅者模式更像是一种跨应用程序模式。发布/订阅服务器可以驻留在两个不同的应用程序中。它们中的每一个都通过消息代理或消息队列进行通信。</p> <h2 id="检查数据类型的方法几种-分别是什么"><a href="#检查数据类型的方法几种-分别是什么" class="header-anchor">#</a> 检查数据类型的方法几种，分别是什么?</h2> <ul><li>typeof</li></ul> <p>typeof操作符返回的是类型字符串，只能判断基本数据类型，所有对象(引用数据类型)的typeof都是&quot;object&quot;,不能用于检测用户自定义类型。</p> <p>需要注意的是typeof null 的结果是“object” 也侧面反映了null的语义，是一个空指针表示空对象(所谓的知名bug存在)。</p> <ul><li>instanceof</li></ul> <p>instanceof操作符用于检查某个对象的原型链是否包含某个构造函数的prototype的属性。</p> <p>用法：</p> <div class="language-js extra-class"><pre class="language-js"><code>obj <span class="token keyword">instanceof</span> <span class="token class-name">Widget</span><span class="token punctuation">(</span>类名或者函数名称<span class="token punctuation">)</span>
</code></pre></div><p>obj的原型链上有很多对象(成为隐式原型)，比如：obj.<strong>proto</strong>,obj.<strong>proto</strong>.<strong>proto</strong>...,如果这些对象存在一个p===Widget.prototype,那么instanceof结果为true，否则为false。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//直接原型关系</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Animal</span> <span class="token comment">//true</span>
<span class="token comment">//原型链上的间接原型</span>
<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Animal</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Animal</span> <span class="token comment">//true</span>
</code></pre></div><p>instanceof 可以用来检测内置兑现，比如Array、RegExp、Object、Function：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">//true</span>
<span class="token operator">/</span><span class="token number">123</span><span class="token operator">/</span> <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span> <span class="token comment">//true</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">//true</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token comment">//true</span>
</code></pre></div><p>instanceof 对基本数据类型不起作用，因为基本数据类型没有原型链。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span> <span class="token comment">//false</span>
<span class="token boolean">true</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span> <span class="token comment">//false</span>
<span class="token string">&quot;aaa&quot;</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">//false</span>
</code></pre></div><p>但是可以这样写就会有效</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span> <span class="token comment">//true</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span> <span class="token comment">//true</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">//true</span>
</code></pre></div><ul><li>constructor
constructor属性返回一个指向创建该对象原型的函数引用。需要注意的是：该属性的值是那个函数的本身：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Animal</span>
a<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Aniaml <span class="token comment">//true</span>
</code></pre></div><p>constructor不适合用来判断变量类型。首先因为它是一个属性，所以非常容易被伪造：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Animal</span>
a<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Array
a<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Animal <span class="token comment">//false</span>
</code></pre></div><p>constructor指向的是最初创建当前对象的函数，是原型链__proto__ 最上层的那个方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Animal</span>

<span class="token keyword">function</span> <span class="token function">BadCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">BadCat</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cat</span>

<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BadCat</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Animal <span class="token comment">//true</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function  <span class="token comment">//true</span>
</code></pre></div><p>与instanceof类似，constructor只能用于检测对象，对于基本数据类型无能为力。而且因为 constructor 是对象属性，在基本数据类型上调用会抛出TypeError异常：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">null</span><span class="token punctuation">.</span>constructor <span class="token comment">//TypeError!!</span>
<span class="token keyword">undefined</span><span class="token punctuation">.</span>constructor <span class="token comment">//TypeError!!</span>
</code></pre></div><p>和 instanceof 不同的是：在访问基本数据类型的属性是，JavaScript会自动调用其构造函数来生成一个对象。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Number <span class="token comment">//true</span>
<span class="token boolean">true</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Boolean <span class="token comment">//true</span>
<span class="token string">&quot;aaa&quot;</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> String <span class="token comment">//ture</span>
<span class="token comment">//相当于</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token function">Number</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token function">Boolean</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> String
</code></pre></div><ul><li>跨窗口问题
JavaScript是运行在宿主环境下的，而每个宿主环境会提供一套ECMA标准的内置对象以及宿主对象(如widow，document)，一个新的窗口即是一个新的宿主环境。不同窗口下的内置对象是不同的实例，拥有不同的内存地址。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// a.html
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// main.html
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> frame <span class="token operator">=</span> window<span class="token punctuation">.</span>frames<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> frame<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>contructor <span class="token operator">===</span> Array<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">frame<span class="token punctuation">.</span>Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>而instanceof和constructor都是通过比较两个Function是否相等来进行判断的。此时很显然会出现问题的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> iframe<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> iWindow<span class="token operator">=</span>iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>

iWindow<span class="token punctuation">.</span>Array <span class="token operator">===</span> Array <span class="token comment">//false</span>
<span class="token comment">//相当于</span>
iWindow<span class="token punctuation">.</span>Array <span class="token operator">===</span> window<span class="token punctuation">.</span>Array <span class="token comment">//false</span>
</code></pre></div><p>因此iWindow中的数组arr原型链上是没有window.Array的。</p> <div class="language-js extra-class"><pre class="language-js"><code>iWindow<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;script&gt; var arr = [1, 2]&lt;/script&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iWindow<span class="token punctuation">.</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>            <span class="token comment">// false</span>
iWindow<span class="token punctuation">.</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">iWindow<span class="token punctuation">.</span>Array</span>    <span class="token comment">// true</span>
</code></pre></div><ul><li>toString
toString 方法是最为可靠的类型检测手段，它会将当前对象转换为字符串并输出。toString 属性定义在Object.prototype上，因而所有对象都拥有toString 方法。但Array、Date等对象会重写从Object.prototype继承来的toString，所以最好用Object.prototype.toString来检测类型。</li></ul> <p>每个类在内部都有一个 [[Class]] 属性，这个属性中就指定了上述字符串中的构造函数名,Object.prototype.toString 的原理是当调用的时候, 就取值内部的 [[Class]] 属性值, 然后拼接成 '[object ' + [[Class]] + ']' 这样的字符串并返回. 然后我们使用 call 方法来获取任何值的数据类型。</p> <div class="language-js extra-class"><pre class="language-js"><code>toString<span class="token operator">=</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Date]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object String]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Math]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Number]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Array]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Object]</span>

<span class="token comment">//Since JavaScript 1.8.5</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Undefined]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>unll<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Unll]</span>
</code></pre></div><p>toString 也不是完美的，它无法检测用户自定义类型。因为Object.prototype是不知道用户会创造什么类型的，它只能检测ECMA标准中的拿些内置类型。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">)</span><span class="token comment">//[object Object]</span>
</code></pre></div><p>因为返回值是字符串，也避免了跨窗口问题。当然IE弹窗中还是有bug，那就不需要管它，现在还有多少人在用IE?多少人还在用弹框?</p> <p>和Object.prototype.toString类似，Function.prototype.toString也有类似功能，不过它的this只能是Function，其他类型(例如基本数据类型)都会抛出异常。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>typeof只能检测基本数据类型，对于null会存在bug</li> <li>instanceof适用于检测对象，但是基于原型链运作的</li> <li>constructor指向的是最初创建者，而且容易伪造，不适合做类型判断</li> <li>toString适用于ECMA内置JavaScript类型(包括基本数据类型和内置对象)的类型判断</li> <li>基于引用类型等的类型检查都有跨窗口问题，比如instanceof和constructor</li></ul> <p>总之，如果要判断的是基本数据类型或JavaScript内置对象，使用toString；如果要判断的是自定义类型，可以使用instanceof。</p> <h2 id="谈谈对json的了解。"><a href="#谈谈对json的了解。" class="header-anchor">#</a> 谈谈对JSON的了解。</h2> <h3 id="json是什么"><a href="#json是什么" class="header-anchor">#</a> JSON是什么?</h3> <p>JSON(JavaScript Object Notation)是一个轻量级的数据交换格式，容易与人阅读和编写，同时易于机器解析和生成，JSON采用完全独立语言的文本格式，而且很多语言都提供了对JSON的支持(包括c、c++、java、c#等)，这样就会使得JSON成为理想的数据交换格式。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>轻量级指的是和xml作比较，数据交换指的是客户端和服务器之间业务数据的传递格式。</p></div> <h3 id="json在javascript中的应用"><a href="#json在javascript中的应用" class="header-anchor">#</a> JSON在JavaScript中的应用</h3> <ul><li>JSON的定义:</li></ul> <p>JSON是由键值对组成，并且是由花括号(大括号)包围。每个键由引号引起来，键和值之间使用冒号进行分割，多组键值对之间使用逗号进行分割</p> <div class="language-json extra-class"><pre class="language-json"><code>var perosnObj = <span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;sunny&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
  <span class="token property">&quot;hobby&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;swimming&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;shanghai&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sichuang&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key_1&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;key_1_1&quot;</span> <span class="token operator">:</span> <span class="token number">551</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key_1_2&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;key_1_2_value&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key_2&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;key_2_1_1&quot;</span> <span class="token operator">:</span> <span class="token number">6611</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key_2_1_2&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;key_2_2_2_value&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>JSON的访问</li></ul> <p>JSON本身是一个对象
JSON中的key可以理解为是对象中的一个属性
JSON中的key访问就跟访问对象的属性一样：JSON对象.key</p> <ul><li>JSON中的两个常用的方法</li></ul> <p>JSON的存在有两种方式：
一种是对象的形式存在，我们叫它JSON对象，一种是字符串的形式存在，我们叫它JSON字符串。</p> <p>一般我们要操作json中的数据的时候，需要json对象的格式，一般我们要在客户端和服务器之间进行数据交换的时候，使用json字符串。</p> <p>JSON.stringify() 把json对象转化为json字符串</p> <p>JSON.parse()  把json字符串转换为json对象</p> <h2 id="进行哪些操作会造成内存泄漏"><a href="#进行哪些操作会造成内存泄漏" class="header-anchor">#</a> 进行哪些操作会造成内存泄漏?</h2> <h3 id="什么是内存泄漏"><a href="#什么是内存泄漏" class="header-anchor">#</a> 什么是内存泄漏?</h3> <p>内存泄漏 是指由于疏忽或错误造成程序未能释放已经不在使用的内存。内存泄漏并非指内存在物理上的消失，而是应用程序分配某段内存后，由于设计错误，导致在释放该段内存之前就失去了对该段内存的控制，从而造成了内存的浪费。内存泄漏通常情况下只能由获得程序源代码的程序员才能分析出来。然而，有不少人习惯把任何不需要的内存使用的增加描述为内存泄漏，即使严格意义上来说这是不准确的。(内存泄漏是指程序中已动态分配的堆内存由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果)</p> <h3 id="常见的内存泄漏"><a href="#常见的内存泄漏" class="header-anchor">#</a> 常见的内存泄漏</h3> <ul><li>意外的全局变量</li></ul> <p>JavaScript对未声明变量的处理方式：在全局对象上创建该变量的引用，(即全局对象上的属性，不是变量，因为它能通过 delete 删除)。如果在浏览器中，全局对象就是window对象。如果未声明的变量缓存大量的数据，会导致这些数据只有在窗口关闭或重新刷新页面时才会被释放，这样会造成意外的内存泄漏。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>说到全局变量，需要注意那些用来临时存储大量数据的全局变量，确保在处理完这些数据后将其设置为null或重新赋值。全局变量也常用来做cache，一般cache都是为了性能优化才用到的，为了性能，最好对cache的大小做个上限限制。因为cache是不被回收的，越高cache会导致越高的内存消耗。</p></div> <ul><li>闭包
由于闭包会携带包含它的函数作用域，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多 原因是在相同作用域内创建的多个内部函数对象是共享同一个变量对象。如果创建的内部函数没有被其他对象引用引用，不管内部函数是否引用外部函数的变量和参数，在外部函数执行完，对应变量对象便会被销毁。反之，如果内部函数中存在有对外部函数变量或参数的访问，并且存在某个或多个内部函数被其他对象引用，那么就会形成闭包。外部函数的变量对象就会存在于闭包函数的作用域链中。这样确保了闭包函数有权访问外部函数的所有变量和函数。</li> <li>DOM泄露
在JavaScript中，DOM操作是非常耗时的。因为JavaScript/ECMAScript引擎独立于渲染引擎，而DOM是位于渲染引擎，相互访问需要消耗一定的资源。比如Chrome浏览器中DOM位于WebCore，而JavaScript/ECMAScript位于V8中。假如将JavaScript/ECMAScript、DOM分别想象成两座孤岛，两座孤岛之间通过一座收费桥连接，过桥需要缴纳一定的&quot;过桥费&quot;。JavaScript/ECMAScript每次访问DOM时，都需要缴纳&quot;过桥费&quot;。因此访问DOM次数越多，费用越高，页面性能就会受到很大的影响。为了减少DOM访问次数，一般情况下，当需要多次访问同一个DOM方法或属性时，会将DOM引用缓存到一个局部变量中。但如果在执行 某些删除、更新操作时 ，可能会忘记释放掉代码中对应的DOM引用，这样会造成DOM内存泄漏。</li> <li>定时器
在JavaScript常用 setInterval()、setTimeout()链式调用 来实现一些动画效果。如果我们不需要 setInterval() 时，没有通过 clearInterval() 方法移除，那么 setInterval() 会不停的调用函数，直到调用 clearInterval() 或者 关闭窗口 。如果链式 setTimeout() 调用模式没有给出终止逻辑，也会一直运行下去。因此不需要重复定时器时，确保对定时器进行清除，避免占用资源。另外，在使用 setInterval() 和 setTimeout() 来实现动画时，无法确保定时器按照指定的时间间隔来执行动画。</li> <li>事件函数(EventListener)
项目中的一个场景：做移动开发时，需要对不同设备尺寸做适配。如在开发组件时，有时需要考虑处理横竖屏适配问题。一般做法，在横竖屏发生变化时，需要将组件销毁后再重新生成。而在组件中会对其进行相关事件绑定，如果在销毁组件时，没有将组件的事件解绑，在横竖屏发生变化时，就会不断地对组件进行事件绑定。这样会导致一些异常，甚至可能会导致页面崩掉。同一个元素节点注册了多个相同的EventListener，那么重复的实例会被抛弃。这么做不会让EventListener被重复调用，也不需要用removeEventListener手动清除多余的EventListener，因为重复的都被自动抛弃了。而这条规则只是针对于命名函数。</li></ul> <h2 id="谈谈你所理解的函数式编程。"><a href="#谈谈你所理解的函数式编程。" class="header-anchor">#</a> 谈谈你所理解的函数式编程。</h2> <h3 id="什么是函数式编程"><a href="#什么是函数式编程" class="header-anchor">#</a> 什么是函数式编程?</h3> <p>在计算机科学中，函数式编程是一种编程范式---构建计算机程序结构和元素的一种风格---它把计算当做数学上的函数对待，避免状态的改变以及可变数据。它是一种声明式的编程范式，因为程序是用表达式或者声明而不是使用语句来完成的。在函数中，输出的值只依赖域它的参数，换句话说相同的输入总得到相同的输出。这与命令式编程相反，在命令式编程中，除了函数参数，全局程序装填也可以影响函数最终的结果。消除副作用，既不依赖函数输出的状态变化，这能使程序更容易理解，这也是使用函数式编程开发程序的主要动机之一。
换个大白话来说就是：根据学术上函数的定义，函数是一种描述集合和集合之间的转换关系，输入通过函数都会返回有且只有一个输出值，所以函数实际上是一个关系，或者说是一种映射，而这种映射关系是可以组合的，一旦我们知道一个函数的输出类型可以匹配另一个函数的输出，那他们可以进行组合。在我们的编程世界里，我们需要处理的其实只有&quot;数据&quot;和&quot;关系&quot;，而关系就是函数。我们所谓的编程工作也不过就是在找一种 映射关系 ，一旦关系找到啦，问题就解决啦，剩下的事情，就是让数据流过这种关系，然后转换成另一个数据罢了。或者是用 流水线 来形容，把输入当作原材料，把输出当做产品， 数据可以不断从一个函数的输出可以流入另一个函数输入 ，最后在输出结果，这不正是一套流水线么?所以函数式编程更多强调在编写过程中把更多的关注点放在如何构建关系。通过构建一条高效的流水线工程，一次性解决所有问题，而不是把精力分散在不同的加工厂中来回奔波传递数据。</p> <h3 id="函数式编程的特点"><a href="#函数式编程的特点" class="header-anchor">#</a> 函数式编程的特点:</h3> <ul><li>函数是&quot;一等公民&quot;
这是函数式编程实现的 前提 ，因为我们基本的操作都是操作函数。这个特性意味着函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数传入另一个函数，或者作为别的函数的返回值。</li> <li>声明式编程
函数式编程大多时候都是在声明我需要什么，而不是怎么去做。这种编程风格称为声明式编程。这个有个好处是：代码的可读性特别高，因为声明式代码大多都是接近自然语言，同时，它解放了大量的人力，因为他不关心具体的实现，因此它可以把优化能力交给具体的实现，这也方便我们进行分工协作。
SQL 语句就是声明式的，不需要关心Select语句是怎样实现的，不同的数据库会去实现它自己的方法并且优化。React也是声明式的，只要描述自己的UI，接下来状态变化后UI如何更新，是React在运行时帮你处理的，而不是靠自己去渲染和优化diff算法。</li> <li>惰性执行
所谓的惰性执行指的是函数只在需要的时候执行，既不产生无意义的中间变量。函数式编程和命令式编程最大的区别就是在于几乎没有中间变量，从头到尾都在写函数，只有在最后的时候才通过调用函数产生实际(最终)的结果。</li> <li>无状态和数据不可变</li></ul> <p>数据不可变：它要求你所有的数据都是不可变的，这意味着如果你想修改一个对象，那你应该创建一个新的对象用来修改，而不是修改已有的对象。</p> <p>无状态：主要强调对于一个函数，不管你何时运行，都和第一次运行时一样，给定相同的输入，给出相同的输出，完全不依赖外部状态的变化</p> <p>为了实现这个目标，函数式编程提出函数应该具备的特性：没有副作用和纯函数。</p> <ul><li>没有副作用</li></ul> <p>在完成函数主要功能之外完成的其他副要功能。在我们函数中最主要的功能当然是根据输入返回结果，而在函数中我们最常见的副作用是随意操纵外部变量。由于JS中对象传递的是引用地址，哪怕我们用const官架子声明对象，它依旧是可变的，正是这个'漏洞'让我们有机会可以随意修改对象。保证函数没有副作用，一来能保证数据的不可变性，二来能避免很多因共享状态带来的问题。当你一个人维护代码的时候可能不明显，但是随着项目的迭代，项目参与人数增加，大家对同一变量的依赖和引用越来越多，这种问题会越来越严重。最终可能连维护者自己都不清楚变量到底是在哪儿被改变而产生的bug</p> <ul><li>纯函数：传函数的概念很简单，就是两点：不依赖外部状态(无状态，函数的运行结果不依赖全局变量，比如this指针，IO操作等)和没有副作用(数据不变，不修改全局变量，不修改入参)，纯函数才是真正意义上的&quot;函数&quot;，意味着<code>相同的输入，永远得到相同的输出</code>.</li></ul> <p>强调纯函数的意义：</p> <ul><li>便于测试和优化：这个意义在实际项目开发中意义非常大，由于纯函数对于相同的输入永远返回相同的结果，因此我们可以轻松断言函数的执行结果，同时也可以保证函数的优化不会影响其他代码的执行，这十分符合测试驱动开发TDD的思想，这样产生的代码往往健壮性更强。</li> <li>可缓存性：因为相同的输入总是可以返回相同的输出，因此，我们可以提前缓存函数的结果。比如有很多库会有所谓的memoize函数，可以缓存函数的结果。</li> <li>自文档化：由于纯函数没有副作用，所以其依赖很明确，因此更易于观察和理解</li> <li>更少的bug：使用纯函数意味着你的函数中不存在指向不明的this，不存在对全局变量的引用，不存在对参数的修改，这些共享状态往往是绝大多数bug的源头</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front/base/JS练习/01.html" class="prev">
        运行题
      </a></span> <span class="next"><a href="/front/base/JS练习/03.html">
        手写题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.99d8b2e7.js" defer></script><script src="/assets/js/2.3eedf0cf.js" defer></script><script src="/assets/js/1.461a0297.js" defer></script><script src="/assets/js/28.5583a162.js" defer></script><script src="/assets/js/80.57c199e7.js" defer></script>
  </body>
</html>
