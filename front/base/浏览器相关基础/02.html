<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域 | 黑豆的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="黑豆的博客">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.7dcbcc26.css" as="style"><link rel="preload" href="/assets/js/app.99d8b2e7.js" as="script"><link rel="preload" href="/assets/js/2.3eedf0cf.js" as="script"><link rel="preload" href="/assets/js/1.461a0297.js" as="script"><link rel="preload" href="/assets/js/47.08510b62.js" as="script"><link rel="preload" href="/assets/js/80.57c199e7.js" as="script"><link rel="prefetch" href="/assets/js/10.a8fd5793.js"><link rel="prefetch" href="/assets/js/100.44c8bd82.js"><link rel="prefetch" href="/assets/js/101.bb1c58b4.js"><link rel="prefetch" href="/assets/js/102.96141f72.js"><link rel="prefetch" href="/assets/js/103.af0c3823.js"><link rel="prefetch" href="/assets/js/104.35ed8635.js"><link rel="prefetch" href="/assets/js/105.708b89c0.js"><link rel="prefetch" href="/assets/js/106.20f03bca.js"><link rel="prefetch" href="/assets/js/107.faf5cc02.js"><link rel="prefetch" href="/assets/js/108.cb76a6bc.js"><link rel="prefetch" href="/assets/js/109.126e9cb6.js"><link rel="prefetch" href="/assets/js/11.6ec6a70f.js"><link rel="prefetch" href="/assets/js/110.ee155398.js"><link rel="prefetch" href="/assets/js/111.7cd01b2a.js"><link rel="prefetch" href="/assets/js/112.05534a62.js"><link rel="prefetch" href="/assets/js/113.8fce6fb1.js"><link rel="prefetch" href="/assets/js/114.5296ad64.js"><link rel="prefetch" href="/assets/js/115.256be922.js"><link rel="prefetch" href="/assets/js/116.3f4369e1.js"><link rel="prefetch" href="/assets/js/117.2142f60b.js"><link rel="prefetch" href="/assets/js/118.d0b314d1.js"><link rel="prefetch" href="/assets/js/119.b3dbbbba.js"><link rel="prefetch" href="/assets/js/12.47bc3be3.js"><link rel="prefetch" href="/assets/js/120.bc8cfbe9.js"><link rel="prefetch" href="/assets/js/121.949ef6c9.js"><link rel="prefetch" href="/assets/js/122.7c4f8f02.js"><link rel="prefetch" href="/assets/js/123.38ea12a6.js"><link rel="prefetch" href="/assets/js/124.f03975d1.js"><link rel="prefetch" href="/assets/js/125.7d45e38a.js"><link rel="prefetch" href="/assets/js/126.fe53a61c.js"><link rel="prefetch" href="/assets/js/127.8d0fb240.js"><link rel="prefetch" href="/assets/js/128.eb9131d8.js"><link rel="prefetch" href="/assets/js/129.6287c5aa.js"><link rel="prefetch" href="/assets/js/13.6a3faa3d.js"><link rel="prefetch" href="/assets/js/130.594a5f95.js"><link rel="prefetch" href="/assets/js/131.a25d9997.js"><link rel="prefetch" href="/assets/js/132.de9b2246.js"><link rel="prefetch" href="/assets/js/133.56ceefbb.js"><link rel="prefetch" href="/assets/js/134.0036f7d9.js"><link rel="prefetch" href="/assets/js/135.922f03c6.js"><link rel="prefetch" href="/assets/js/136.6ec3bf33.js"><link rel="prefetch" href="/assets/js/137.278bd239.js"><link rel="prefetch" href="/assets/js/138.05015bd3.js"><link rel="prefetch" href="/assets/js/139.4b37d910.js"><link rel="prefetch" href="/assets/js/14.dd3258aa.js"><link rel="prefetch" href="/assets/js/140.26ac508e.js"><link rel="prefetch" href="/assets/js/141.04d71e20.js"><link rel="prefetch" href="/assets/js/142.13d7d63c.js"><link rel="prefetch" href="/assets/js/143.46ad857e.js"><link rel="prefetch" href="/assets/js/144.80a2092f.js"><link rel="prefetch" href="/assets/js/145.e61d2536.js"><link rel="prefetch" href="/assets/js/146.94fcfb9f.js"><link rel="prefetch" href="/assets/js/147.193c9275.js"><link rel="prefetch" href="/assets/js/148.461d82f0.js"><link rel="prefetch" href="/assets/js/149.c6e43ff5.js"><link rel="prefetch" href="/assets/js/15.0a2d01b1.js"><link rel="prefetch" href="/assets/js/150.6c48a8d0.js"><link rel="prefetch" href="/assets/js/151.22a14608.js"><link rel="prefetch" href="/assets/js/152.f5e46bbb.js"><link rel="prefetch" href="/assets/js/153.3f13394c.js"><link rel="prefetch" href="/assets/js/154.d05e648e.js"><link rel="prefetch" href="/assets/js/155.2bb1659a.js"><link rel="prefetch" href="/assets/js/156.64d39ba1.js"><link rel="prefetch" href="/assets/js/157.3cdf9604.js"><link rel="prefetch" href="/assets/js/158.87e2f807.js"><link rel="prefetch" href="/assets/js/159.7503cb20.js"><link rel="prefetch" href="/assets/js/16.42369fc4.js"><link rel="prefetch" href="/assets/js/160.55c8a8b4.js"><link rel="prefetch" href="/assets/js/161.3e0fe81d.js"><link rel="prefetch" href="/assets/js/162.83297e1e.js"><link rel="prefetch" href="/assets/js/163.3e9e440c.js"><link rel="prefetch" href="/assets/js/164.d8da7753.js"><link rel="prefetch" href="/assets/js/165.1af15093.js"><link rel="prefetch" href="/assets/js/166.355e64b4.js"><link rel="prefetch" href="/assets/js/167.3a93b460.js"><link rel="prefetch" href="/assets/js/168.093d8a10.js"><link rel="prefetch" href="/assets/js/169.7783dd31.js"><link rel="prefetch" href="/assets/js/17.2e4bed97.js"><link rel="prefetch" href="/assets/js/170.323d14f0.js"><link rel="prefetch" href="/assets/js/171.2dca02c2.js"><link rel="prefetch" href="/assets/js/172.2113837e.js"><link rel="prefetch" href="/assets/js/173.0880ed96.js"><link rel="prefetch" href="/assets/js/174.21e41c8d.js"><link rel="prefetch" href="/assets/js/175.24057138.js"><link rel="prefetch" href="/assets/js/176.5b75c1f2.js"><link rel="prefetch" href="/assets/js/177.1117a387.js"><link rel="prefetch" href="/assets/js/178.f861ee85.js"><link rel="prefetch" href="/assets/js/179.b994ee8c.js"><link rel="prefetch" href="/assets/js/18.5180f4f8.js"><link rel="prefetch" href="/assets/js/180.c0c010cf.js"><link rel="prefetch" href="/assets/js/181.e984d119.js"><link rel="prefetch" href="/assets/js/182.f8bf953f.js"><link rel="prefetch" href="/assets/js/183.9859029a.js"><link rel="prefetch" href="/assets/js/184.dfcbf4e7.js"><link rel="prefetch" href="/assets/js/185.6d852b91.js"><link rel="prefetch" href="/assets/js/186.2739a188.js"><link rel="prefetch" href="/assets/js/187.9828f8e1.js"><link rel="prefetch" href="/assets/js/188.f0104a26.js"><link rel="prefetch" href="/assets/js/189.e141c6b6.js"><link rel="prefetch" href="/assets/js/19.da294525.js"><link rel="prefetch" href="/assets/js/190.c5bce55c.js"><link rel="prefetch" href="/assets/js/191.0a31f2ed.js"><link rel="prefetch" href="/assets/js/192.c99df1ba.js"><link rel="prefetch" href="/assets/js/193.6774c4ab.js"><link rel="prefetch" href="/assets/js/194.7e9c2ccc.js"><link rel="prefetch" href="/assets/js/195.31822c0f.js"><link rel="prefetch" href="/assets/js/196.8ef27177.js"><link rel="prefetch" href="/assets/js/197.95ce2481.js"><link rel="prefetch" href="/assets/js/198.11537ac5.js"><link rel="prefetch" href="/assets/js/199.f87470d6.js"><link rel="prefetch" href="/assets/js/20.f3f361e9.js"><link rel="prefetch" href="/assets/js/200.6dea4b37.js"><link rel="prefetch" href="/assets/js/201.27e2b3af.js"><link rel="prefetch" href="/assets/js/202.5fb57278.js"><link rel="prefetch" href="/assets/js/203.4b197b72.js"><link rel="prefetch" href="/assets/js/204.02083e58.js"><link rel="prefetch" href="/assets/js/205.f5a0f9ac.js"><link rel="prefetch" href="/assets/js/206.44269b20.js"><link rel="prefetch" href="/assets/js/207.5aa0dc4f.js"><link rel="prefetch" href="/assets/js/208.d5e417b1.js"><link rel="prefetch" href="/assets/js/209.cf4f05c4.js"><link rel="prefetch" href="/assets/js/21.69ebcf70.js"><link rel="prefetch" href="/assets/js/210.2b9041fa.js"><link rel="prefetch" href="/assets/js/211.10483086.js"><link rel="prefetch" href="/assets/js/212.3d0dcb3e.js"><link rel="prefetch" href="/assets/js/213.c84eeba9.js"><link rel="prefetch" href="/assets/js/214.ac472bfc.js"><link rel="prefetch" href="/assets/js/215.a457558a.js"><link rel="prefetch" href="/assets/js/216.d04a28e1.js"><link rel="prefetch" href="/assets/js/217.05aba786.js"><link rel="prefetch" href="/assets/js/218.a863c37a.js"><link rel="prefetch" href="/assets/js/219.7dec7421.js"><link rel="prefetch" href="/assets/js/22.d01326e7.js"><link rel="prefetch" href="/assets/js/220.7098fc50.js"><link rel="prefetch" href="/assets/js/221.6ead8a78.js"><link rel="prefetch" href="/assets/js/222.bb4c0e57.js"><link rel="prefetch" href="/assets/js/223.50b992ec.js"><link rel="prefetch" href="/assets/js/224.1e5b111f.js"><link rel="prefetch" href="/assets/js/225.d64e693b.js"><link rel="prefetch" href="/assets/js/226.5d517cf2.js"><link rel="prefetch" href="/assets/js/227.55a331ee.js"><link rel="prefetch" href="/assets/js/228.9128b32d.js"><link rel="prefetch" href="/assets/js/229.5e71e628.js"><link rel="prefetch" href="/assets/js/23.c9bc0ea6.js"><link rel="prefetch" href="/assets/js/230.6daf681f.js"><link rel="prefetch" href="/assets/js/231.b43ff551.js"><link rel="prefetch" href="/assets/js/232.c87810d8.js"><link rel="prefetch" href="/assets/js/233.b5c0e6b1.js"><link rel="prefetch" href="/assets/js/234.50887b03.js"><link rel="prefetch" href="/assets/js/235.e7299edc.js"><link rel="prefetch" href="/assets/js/236.ebc4838d.js"><link rel="prefetch" href="/assets/js/237.f05278b5.js"><link rel="prefetch" href="/assets/js/238.22017696.js"><link rel="prefetch" href="/assets/js/239.eee224df.js"><link rel="prefetch" href="/assets/js/24.145475ae.js"><link rel="prefetch" href="/assets/js/240.2e401eaf.js"><link rel="prefetch" href="/assets/js/241.13b70c68.js"><link rel="prefetch" href="/assets/js/242.a155eb55.js"><link rel="prefetch" href="/assets/js/243.1fc340b4.js"><link rel="prefetch" href="/assets/js/244.6baa3c2c.js"><link rel="prefetch" href="/assets/js/245.ae2221f8.js"><link rel="prefetch" href="/assets/js/246.5b9919b8.js"><link rel="prefetch" href="/assets/js/247.8510f91e.js"><link rel="prefetch" href="/assets/js/248.bb2b74f8.js"><link rel="prefetch" href="/assets/js/249.fce641b2.js"><link rel="prefetch" href="/assets/js/25.6a4f99dc.js"><link rel="prefetch" href="/assets/js/250.e7fe5642.js"><link rel="prefetch" href="/assets/js/251.200e84f1.js"><link rel="prefetch" href="/assets/js/252.504082ac.js"><link rel="prefetch" href="/assets/js/253.b2ae815e.js"><link rel="prefetch" href="/assets/js/254.a659f7ce.js"><link rel="prefetch" href="/assets/js/255.cb8fc0c9.js"><link rel="prefetch" href="/assets/js/256.50ca9726.js"><link rel="prefetch" href="/assets/js/257.312a0b0b.js"><link rel="prefetch" href="/assets/js/258.9436ae0d.js"><link rel="prefetch" href="/assets/js/259.8a73f3eb.js"><link rel="prefetch" href="/assets/js/26.ef2dc4ec.js"><link rel="prefetch" href="/assets/js/260.c175eaaf.js"><link rel="prefetch" href="/assets/js/261.e45d1c45.js"><link rel="prefetch" href="/assets/js/262.2c7af640.js"><link rel="prefetch" href="/assets/js/263.e98803f0.js"><link rel="prefetch" href="/assets/js/264.5e65aaaf.js"><link rel="prefetch" href="/assets/js/265.5907408c.js"><link rel="prefetch" href="/assets/js/266.269625b8.js"><link rel="prefetch" href="/assets/js/267.20596cc8.js"><link rel="prefetch" href="/assets/js/268.08da84d1.js"><link rel="prefetch" href="/assets/js/269.32fb0463.js"><link rel="prefetch" href="/assets/js/27.9f755ce4.js"><link rel="prefetch" href="/assets/js/270.22929897.js"><link rel="prefetch" href="/assets/js/271.38168464.js"><link rel="prefetch" href="/assets/js/272.37b4706e.js"><link rel="prefetch" href="/assets/js/273.8442069e.js"><link rel="prefetch" href="/assets/js/274.916bc83e.js"><link rel="prefetch" href="/assets/js/275.0b5e477c.js"><link rel="prefetch" href="/assets/js/276.a17d2943.js"><link rel="prefetch" href="/assets/js/277.337f4973.js"><link rel="prefetch" href="/assets/js/278.57963423.js"><link rel="prefetch" href="/assets/js/279.55328580.js"><link rel="prefetch" href="/assets/js/28.5583a162.js"><link rel="prefetch" href="/assets/js/280.64dd2a5f.js"><link rel="prefetch" href="/assets/js/281.4891e50c.js"><link rel="prefetch" href="/assets/js/282.846ccf57.js"><link rel="prefetch" href="/assets/js/283.190b6105.js"><link rel="prefetch" href="/assets/js/284.cea8ab39.js"><link rel="prefetch" href="/assets/js/285.9a736ee4.js"><link rel="prefetch" href="/assets/js/286.baf72b59.js"><link rel="prefetch" href="/assets/js/287.7b9ac8dd.js"><link rel="prefetch" href="/assets/js/288.0f2dd7a3.js"><link rel="prefetch" href="/assets/js/289.b8faf276.js"><link rel="prefetch" href="/assets/js/29.17436273.js"><link rel="prefetch" href="/assets/js/290.123070af.js"><link rel="prefetch" href="/assets/js/291.2b401f90.js"><link rel="prefetch" href="/assets/js/292.6db3d5d0.js"><link rel="prefetch" href="/assets/js/293.1d6573c3.js"><link rel="prefetch" href="/assets/js/294.47e4ae72.js"><link rel="prefetch" href="/assets/js/295.7c84000b.js"><link rel="prefetch" href="/assets/js/296.e8e24597.js"><link rel="prefetch" href="/assets/js/297.d7205379.js"><link rel="prefetch" href="/assets/js/298.7e61917d.js"><link rel="prefetch" href="/assets/js/299.74c88473.js"><link rel="prefetch" href="/assets/js/3.603ed79b.js"><link rel="prefetch" href="/assets/js/30.7dd304de.js"><link rel="prefetch" href="/assets/js/300.f37eea58.js"><link rel="prefetch" href="/assets/js/301.4631b290.js"><link rel="prefetch" href="/assets/js/302.9877edfb.js"><link rel="prefetch" href="/assets/js/303.c6e35854.js"><link rel="prefetch" href="/assets/js/304.297a6bbd.js"><link rel="prefetch" href="/assets/js/305.49bdcf78.js"><link rel="prefetch" href="/assets/js/306.911f0032.js"><link rel="prefetch" href="/assets/js/307.8adbd359.js"><link rel="prefetch" href="/assets/js/308.ebd0b400.js"><link rel="prefetch" href="/assets/js/309.c726441c.js"><link rel="prefetch" href="/assets/js/31.a96ccda1.js"><link rel="prefetch" href="/assets/js/310.669832cf.js"><link rel="prefetch" href="/assets/js/311.33592b74.js"><link rel="prefetch" href="/assets/js/312.d69b7693.js"><link rel="prefetch" href="/assets/js/313.4b36a021.js"><link rel="prefetch" href="/assets/js/314.d4443d12.js"><link rel="prefetch" href="/assets/js/315.d3ee6f19.js"><link rel="prefetch" href="/assets/js/316.b3b3b30b.js"><link rel="prefetch" href="/assets/js/317.2d119d0f.js"><link rel="prefetch" href="/assets/js/318.8c778697.js"><link rel="prefetch" href="/assets/js/319.ad4ed96a.js"><link rel="prefetch" href="/assets/js/32.fe3d52fc.js"><link rel="prefetch" href="/assets/js/320.a390410b.js"><link rel="prefetch" href="/assets/js/321.542130c4.js"><link rel="prefetch" href="/assets/js/322.c4267922.js"><link rel="prefetch" href="/assets/js/323.77757be4.js"><link rel="prefetch" href="/assets/js/324.daf16678.js"><link rel="prefetch" href="/assets/js/325.33dd10ae.js"><link rel="prefetch" href="/assets/js/326.c273ffb9.js"><link rel="prefetch" href="/assets/js/327.d23e6c92.js"><link rel="prefetch" href="/assets/js/328.9fe05464.js"><link rel="prefetch" href="/assets/js/329.c2e2bb00.js"><link rel="prefetch" href="/assets/js/33.c9bdef3b.js"><link rel="prefetch" href="/assets/js/330.4d3443cf.js"><link rel="prefetch" href="/assets/js/331.170d76ad.js"><link rel="prefetch" href="/assets/js/332.8b6a821b.js"><link rel="prefetch" href="/assets/js/333.bf67a2fc.js"><link rel="prefetch" href="/assets/js/334.596a18eb.js"><link rel="prefetch" href="/assets/js/335.a144d9c4.js"><link rel="prefetch" href="/assets/js/336.140fa7ac.js"><link rel="prefetch" href="/assets/js/337.919e8915.js"><link rel="prefetch" href="/assets/js/338.27332e1e.js"><link rel="prefetch" href="/assets/js/339.eac69ce5.js"><link rel="prefetch" href="/assets/js/34.26a8ecb0.js"><link rel="prefetch" href="/assets/js/340.1a08a3b4.js"><link rel="prefetch" href="/assets/js/341.dc797dd8.js"><link rel="prefetch" href="/assets/js/342.16d2339b.js"><link rel="prefetch" href="/assets/js/343.75d6c551.js"><link rel="prefetch" href="/assets/js/344.6386e156.js"><link rel="prefetch" href="/assets/js/345.940f5b3b.js"><link rel="prefetch" href="/assets/js/346.a619d052.js"><link rel="prefetch" href="/assets/js/347.8149efc4.js"><link rel="prefetch" href="/assets/js/348.8eeb7d51.js"><link rel="prefetch" href="/assets/js/349.a28ee355.js"><link rel="prefetch" href="/assets/js/35.8f6a0fad.js"><link rel="prefetch" href="/assets/js/350.50195c3e.js"><link rel="prefetch" href="/assets/js/351.53e64236.js"><link rel="prefetch" href="/assets/js/352.ea5ef117.js"><link rel="prefetch" href="/assets/js/353.98d30cc0.js"><link rel="prefetch" href="/assets/js/354.4cfd132b.js"><link rel="prefetch" href="/assets/js/355.9de4bc87.js"><link rel="prefetch" href="/assets/js/356.c5b444a7.js"><link rel="prefetch" href="/assets/js/357.da7119c9.js"><link rel="prefetch" href="/assets/js/358.948388c9.js"><link rel="prefetch" href="/assets/js/359.2e1d41fa.js"><link rel="prefetch" href="/assets/js/36.7d41991d.js"><link rel="prefetch" href="/assets/js/360.17a86acb.js"><link rel="prefetch" href="/assets/js/361.0cb6669b.js"><link rel="prefetch" href="/assets/js/362.6d214fe9.js"><link rel="prefetch" href="/assets/js/363.2c13518a.js"><link rel="prefetch" href="/assets/js/364.4e062cfb.js"><link rel="prefetch" href="/assets/js/365.435947c8.js"><link rel="prefetch" href="/assets/js/366.9f035f7f.js"><link rel="prefetch" href="/assets/js/367.6f203ad0.js"><link rel="prefetch" href="/assets/js/368.c1208f02.js"><link rel="prefetch" href="/assets/js/369.15864d3a.js"><link rel="prefetch" href="/assets/js/37.3e371222.js"><link rel="prefetch" href="/assets/js/370.983a75b7.js"><link rel="prefetch" href="/assets/js/371.2d158a44.js"><link rel="prefetch" href="/assets/js/372.817b00d9.js"><link rel="prefetch" href="/assets/js/373.a3f7e510.js"><link rel="prefetch" href="/assets/js/374.746fb1ea.js"><link rel="prefetch" href="/assets/js/375.203031ea.js"><link rel="prefetch" href="/assets/js/376.5d2b05ed.js"><link rel="prefetch" href="/assets/js/377.5eae4445.js"><link rel="prefetch" href="/assets/js/378.da2ce54c.js"><link rel="prefetch" href="/assets/js/379.f29578ba.js"><link rel="prefetch" href="/assets/js/38.c0738668.js"><link rel="prefetch" href="/assets/js/380.cf3b8b02.js"><link rel="prefetch" href="/assets/js/381.1e0ee15b.js"><link rel="prefetch" href="/assets/js/382.185b5cec.js"><link rel="prefetch" href="/assets/js/383.81a0df08.js"><link rel="prefetch" href="/assets/js/384.030e03d1.js"><link rel="prefetch" href="/assets/js/385.6b594acc.js"><link rel="prefetch" href="/assets/js/386.35988f53.js"><link rel="prefetch" href="/assets/js/387.dfde1fbc.js"><link rel="prefetch" href="/assets/js/388.f01e5e0a.js"><link rel="prefetch" href="/assets/js/389.d7f8a17c.js"><link rel="prefetch" href="/assets/js/39.17804091.js"><link rel="prefetch" href="/assets/js/390.b1af8b30.js"><link rel="prefetch" href="/assets/js/391.e4e66ab0.js"><link rel="prefetch" href="/assets/js/392.57c61410.js"><link rel="prefetch" href="/assets/js/393.a520da83.js"><link rel="prefetch" href="/assets/js/394.8716ca42.js"><link rel="prefetch" href="/assets/js/395.82adb50b.js"><link rel="prefetch" href="/assets/js/396.c164a3d6.js"><link rel="prefetch" href="/assets/js/397.83d39a0b.js"><link rel="prefetch" href="/assets/js/398.79ccdcfd.js"><link rel="prefetch" href="/assets/js/399.6393c09f.js"><link rel="prefetch" href="/assets/js/4.e4aaf14c.js"><link rel="prefetch" href="/assets/js/40.d443fbde.js"><link rel="prefetch" href="/assets/js/400.2d944fc1.js"><link rel="prefetch" href="/assets/js/401.268b80ff.js"><link rel="prefetch" href="/assets/js/402.c0c3f68c.js"><link rel="prefetch" href="/assets/js/403.083e8b2b.js"><link rel="prefetch" href="/assets/js/404.4e6f0b13.js"><link rel="prefetch" href="/assets/js/405.6ca5515f.js"><link rel="prefetch" href="/assets/js/406.1d726e20.js"><link rel="prefetch" href="/assets/js/407.9061341c.js"><link rel="prefetch" href="/assets/js/408.6417c73d.js"><link rel="prefetch" href="/assets/js/409.9644048b.js"><link rel="prefetch" href="/assets/js/41.56da8377.js"><link rel="prefetch" href="/assets/js/410.6e7cae19.js"><link rel="prefetch" href="/assets/js/411.d10d09d7.js"><link rel="prefetch" href="/assets/js/412.cdd43db1.js"><link rel="prefetch" href="/assets/js/413.e11cac0c.js"><link rel="prefetch" href="/assets/js/414.cc0556d4.js"><link rel="prefetch" href="/assets/js/415.aaaabf3a.js"><link rel="prefetch" href="/assets/js/416.9eb606c4.js"><link rel="prefetch" href="/assets/js/417.43b60a6f.js"><link rel="prefetch" href="/assets/js/418.9555d224.js"><link rel="prefetch" href="/assets/js/419.881f0cd0.js"><link rel="prefetch" href="/assets/js/42.aafff920.js"><link rel="prefetch" href="/assets/js/420.4597f87f.js"><link rel="prefetch" href="/assets/js/421.9e2b7c38.js"><link rel="prefetch" href="/assets/js/422.67f0bcd9.js"><link rel="prefetch" href="/assets/js/423.eeee12da.js"><link rel="prefetch" href="/assets/js/424.c0bc7088.js"><link rel="prefetch" href="/assets/js/425.cd9f2cbe.js"><link rel="prefetch" href="/assets/js/426.9ac3c10a.js"><link rel="prefetch" href="/assets/js/427.8a42bc74.js"><link rel="prefetch" href="/assets/js/428.3206e476.js"><link rel="prefetch" href="/assets/js/429.7a741277.js"><link rel="prefetch" href="/assets/js/43.1187d734.js"><link rel="prefetch" href="/assets/js/430.24df4cca.js"><link rel="prefetch" href="/assets/js/431.c874ea4d.js"><link rel="prefetch" href="/assets/js/432.0640ab82.js"><link rel="prefetch" href="/assets/js/433.6fbad864.js"><link rel="prefetch" href="/assets/js/434.058d3ea0.js"><link rel="prefetch" href="/assets/js/435.65681d99.js"><link rel="prefetch" href="/assets/js/436.b736f166.js"><link rel="prefetch" href="/assets/js/437.ce1622f6.js"><link rel="prefetch" href="/assets/js/438.92578ffd.js"><link rel="prefetch" href="/assets/js/439.dc0236aa.js"><link rel="prefetch" href="/assets/js/44.f063c31f.js"><link rel="prefetch" href="/assets/js/440.67f05464.js"><link rel="prefetch" href="/assets/js/441.41b7084f.js"><link rel="prefetch" href="/assets/js/442.f2e3b7e0.js"><link rel="prefetch" href="/assets/js/443.612cc90b.js"><link rel="prefetch" href="/assets/js/444.0b9b4e2d.js"><link rel="prefetch" href="/assets/js/445.afce98d0.js"><link rel="prefetch" href="/assets/js/446.5b24d043.js"><link rel="prefetch" href="/assets/js/447.42ef4c92.js"><link rel="prefetch" href="/assets/js/448.9b46084b.js"><link rel="prefetch" href="/assets/js/449.9d6a3934.js"><link rel="prefetch" href="/assets/js/45.c903ded3.js"><link rel="prefetch" href="/assets/js/450.0f8f9ef2.js"><link rel="prefetch" href="/assets/js/451.8d0f5935.js"><link rel="prefetch" href="/assets/js/452.26fc5a41.js"><link rel="prefetch" href="/assets/js/453.f98793d9.js"><link rel="prefetch" href="/assets/js/454.b16d5353.js"><link rel="prefetch" href="/assets/js/455.b39e4c52.js"><link rel="prefetch" href="/assets/js/456.f4aeb52c.js"><link rel="prefetch" href="/assets/js/457.a0649f7b.js"><link rel="prefetch" href="/assets/js/458.4d5dd48c.js"><link rel="prefetch" href="/assets/js/459.bdece430.js"><link rel="prefetch" href="/assets/js/46.c390d374.js"><link rel="prefetch" href="/assets/js/460.646bea09.js"><link rel="prefetch" href="/assets/js/461.ce90de7c.js"><link rel="prefetch" href="/assets/js/462.e6dc008e.js"><link rel="prefetch" href="/assets/js/463.92b34dc0.js"><link rel="prefetch" href="/assets/js/464.ae9b121d.js"><link rel="prefetch" href="/assets/js/465.ec51a4b2.js"><link rel="prefetch" href="/assets/js/466.53bc2dcc.js"><link rel="prefetch" href="/assets/js/467.4fb2648c.js"><link rel="prefetch" href="/assets/js/468.757de5f7.js"><link rel="prefetch" href="/assets/js/469.bcc63cd3.js"><link rel="prefetch" href="/assets/js/470.79749bfc.js"><link rel="prefetch" href="/assets/js/471.cfcff67a.js"><link rel="prefetch" href="/assets/js/472.0948aca5.js"><link rel="prefetch" href="/assets/js/473.e01f4aee.js"><link rel="prefetch" href="/assets/js/474.e6854bfd.js"><link rel="prefetch" href="/assets/js/475.268482fe.js"><link rel="prefetch" href="/assets/js/476.20285045.js"><link rel="prefetch" href="/assets/js/477.1fb4dc61.js"><link rel="prefetch" href="/assets/js/478.a3befcb9.js"><link rel="prefetch" href="/assets/js/479.c906251d.js"><link rel="prefetch" href="/assets/js/48.4902dab4.js"><link rel="prefetch" href="/assets/js/480.a09cbcb9.js"><link rel="prefetch" href="/assets/js/481.f86acf95.js"><link rel="prefetch" href="/assets/js/482.a183be6b.js"><link rel="prefetch" href="/assets/js/483.2aa9b501.js"><link rel="prefetch" href="/assets/js/484.8f04826f.js"><link rel="prefetch" href="/assets/js/485.85b00ab2.js"><link rel="prefetch" href="/assets/js/486.4135aa3d.js"><link rel="prefetch" href="/assets/js/487.3c6ee63e.js"><link rel="prefetch" href="/assets/js/488.e149dd3f.js"><link rel="prefetch" href="/assets/js/489.6d8d121d.js"><link rel="prefetch" href="/assets/js/49.14ef8da8.js"><link rel="prefetch" href="/assets/js/490.2ed02952.js"><link rel="prefetch" href="/assets/js/491.451fe7ed.js"><link rel="prefetch" href="/assets/js/492.4ab175c3.js"><link rel="prefetch" href="/assets/js/493.df5db673.js"><link rel="prefetch" href="/assets/js/494.9eb3ced5.js"><link rel="prefetch" href="/assets/js/495.846bee9f.js"><link rel="prefetch" href="/assets/js/496.ac45e9d5.js"><link rel="prefetch" href="/assets/js/497.0b0c163b.js"><link rel="prefetch" href="/assets/js/498.7463bdb2.js"><link rel="prefetch" href="/assets/js/499.c8cd2767.js"><link rel="prefetch" href="/assets/js/5.aafe7d58.js"><link rel="prefetch" href="/assets/js/50.b372e073.js"><link rel="prefetch" href="/assets/js/500.a80fe311.js"><link rel="prefetch" href="/assets/js/501.b7f00511.js"><link rel="prefetch" href="/assets/js/502.5efaabdc.js"><link rel="prefetch" href="/assets/js/503.51e33c2d.js"><link rel="prefetch" href="/assets/js/504.443f35c0.js"><link rel="prefetch" href="/assets/js/505.4a3de994.js"><link rel="prefetch" href="/assets/js/506.1c123db3.js"><link rel="prefetch" href="/assets/js/507.80fb39b7.js"><link rel="prefetch" href="/assets/js/508.d9443a53.js"><link rel="prefetch" href="/assets/js/509.1c88dbd4.js"><link rel="prefetch" href="/assets/js/51.00f566d6.js"><link rel="prefetch" href="/assets/js/510.1485b105.js"><link rel="prefetch" href="/assets/js/511.4e61a2b5.js"><link rel="prefetch" href="/assets/js/512.b4a5b219.js"><link rel="prefetch" href="/assets/js/513.859e20ad.js"><link rel="prefetch" href="/assets/js/514.30b0d04b.js"><link rel="prefetch" href="/assets/js/515.756b5645.js"><link rel="prefetch" href="/assets/js/516.f7bd3293.js"><link rel="prefetch" href="/assets/js/517.24283391.js"><link rel="prefetch" href="/assets/js/518.001b3ed2.js"><link rel="prefetch" href="/assets/js/519.f5d6c625.js"><link rel="prefetch" href="/assets/js/52.066b3496.js"><link rel="prefetch" href="/assets/js/520.11c5349e.js"><link rel="prefetch" href="/assets/js/521.fb4740b7.js"><link rel="prefetch" href="/assets/js/522.e4b69bd1.js"><link rel="prefetch" href="/assets/js/523.98800aa4.js"><link rel="prefetch" href="/assets/js/524.cfab6cb1.js"><link rel="prefetch" href="/assets/js/525.37b9611d.js"><link rel="prefetch" href="/assets/js/526.83b6b08c.js"><link rel="prefetch" href="/assets/js/527.a201969f.js"><link rel="prefetch" href="/assets/js/528.3eda9cdf.js"><link rel="prefetch" href="/assets/js/529.a726f1dc.js"><link rel="prefetch" href="/assets/js/53.6291d653.js"><link rel="prefetch" href="/assets/js/530.00956b53.js"><link rel="prefetch" href="/assets/js/531.d66d63a5.js"><link rel="prefetch" href="/assets/js/532.cddb6cf7.js"><link rel="prefetch" href="/assets/js/533.73d794c1.js"><link rel="prefetch" href="/assets/js/534.e70a7255.js"><link rel="prefetch" href="/assets/js/535.39f01763.js"><link rel="prefetch" href="/assets/js/536.6833727e.js"><link rel="prefetch" href="/assets/js/537.65d661b2.js"><link rel="prefetch" href="/assets/js/538.67397168.js"><link rel="prefetch" href="/assets/js/54.939afea0.js"><link rel="prefetch" href="/assets/js/55.3c96f255.js"><link rel="prefetch" href="/assets/js/56.6ea06ced.js"><link rel="prefetch" href="/assets/js/57.3464fb24.js"><link rel="prefetch" href="/assets/js/58.aff223fa.js"><link rel="prefetch" href="/assets/js/59.8ce1d621.js"><link rel="prefetch" href="/assets/js/6.9978857d.js"><link rel="prefetch" href="/assets/js/60.7b4d749c.js"><link rel="prefetch" href="/assets/js/61.efd288e6.js"><link rel="prefetch" href="/assets/js/62.fc1e8c01.js"><link rel="prefetch" href="/assets/js/63.ceeb7571.js"><link rel="prefetch" href="/assets/js/64.5a6f4e3d.js"><link rel="prefetch" href="/assets/js/65.99a885b8.js"><link rel="prefetch" href="/assets/js/66.fa6ed5d3.js"><link rel="prefetch" href="/assets/js/67.7030dbf9.js"><link rel="prefetch" href="/assets/js/68.32ae31b3.js"><link rel="prefetch" href="/assets/js/69.7b62268d.js"><link rel="prefetch" href="/assets/js/7.69dfec51.js"><link rel="prefetch" href="/assets/js/70.c618087b.js"><link rel="prefetch" href="/assets/js/71.e444a4bd.js"><link rel="prefetch" href="/assets/js/72.26dc612f.js"><link rel="prefetch" href="/assets/js/73.0e0b4474.js"><link rel="prefetch" href="/assets/js/74.b68294cf.js"><link rel="prefetch" href="/assets/js/75.7a49d4ca.js"><link rel="prefetch" href="/assets/js/76.b80bd638.js"><link rel="prefetch" href="/assets/js/77.e99e7e1f.js"><link rel="prefetch" href="/assets/js/78.fcce05aa.js"><link rel="prefetch" href="/assets/js/79.eac6fbfa.js"><link rel="prefetch" href="/assets/js/81.384ed42c.js"><link rel="prefetch" href="/assets/js/82.ced9799f.js"><link rel="prefetch" href="/assets/js/83.28b240d6.js"><link rel="prefetch" href="/assets/js/84.aa95c43d.js"><link rel="prefetch" href="/assets/js/85.cbb9d877.js"><link rel="prefetch" href="/assets/js/86.5152e88f.js"><link rel="prefetch" href="/assets/js/87.99919db0.js"><link rel="prefetch" href="/assets/js/88.62766163.js"><link rel="prefetch" href="/assets/js/89.a730909b.js"><link rel="prefetch" href="/assets/js/90.3cca9f0b.js"><link rel="prefetch" href="/assets/js/91.589cc7d6.js"><link rel="prefetch" href="/assets/js/92.5ca84528.js"><link rel="prefetch" href="/assets/js/93.8c12b188.js"><link rel="prefetch" href="/assets/js/94.4525023a.js"><link rel="prefetch" href="/assets/js/95.cc020341.js"><link rel="prefetch" href="/assets/js/96.b7166e2d.js"><link rel="prefetch" href="/assets/js/97.8aabed77.js"><link rel="prefetch" href="/assets/js/98.da74f780.js"><link rel="prefetch" href="/assets/js/99.29b01f0c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.68ec0790.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7dcbcc26.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="黑豆的博客" class="logo"> <span class="site-name can-hide">黑豆的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://v.douyin.com/xV-8RHTmtUs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入浅出Vue.js/01.html" class="nav-link">
  深入浅出Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue/01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue-router/01.html" class="nav-link">
  VueRouter
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vuex/01.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue3/01.html" class="nav-link">
  Vue3核心剖析
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vue知识点简单梳理/01.html" class="nav-link">
  Vue知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入React技术栈/01.html" class="nav-link">
  深入React技术栈
</a></li><li class="dropdown-subitem"><a href="/front/react/React进阶实践指南/01.html" class="nav-link">
  React进阶实践指南
</a></li><li class="dropdown-subitem"><a href="/front/react/React知识点简单梳理/01.html" class="nav-link">
  React知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          混合开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/混合开发/01.html" class="nav-link">
  混合开发探究
</a></li></ul></li><li class="dropdown-item"><h4>
          TypeScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/ts/极简入门Typescript/01.html" class="nav-link">
  极简入门Typescript
</a></li></ul></li><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/webpack/极简入门webpack/01.html" class="nav-link">
  极简入门
</a></li><li class="dropdown-subitem"><a href="/front/webpack/常见面试题/01.html" class="nav-link">
  常见面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/设计模式/JS设计模式核心原理和应用实践/01.html" class="nav-link">
  JS设计模式核心原理和应用实践
</a></li></ul></li><li class="dropdown-item"><h4>
          基础必备
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/base/html必备/01.html" class="nav-link">
  HTML必备
</a></li><li class="dropdown-subitem"><a href="/front/base/CSS必备/01.html" class="nav-link">
  CSS必备
</a></li><li class="dropdown-subitem"><a href="/front/base/JS基础/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/front/base/JS进阶/01.html" class="nav-link">
  JS进阶
</a></li><li class="dropdown-subitem"><a href="/front/base/JS练习/01.html" class="nav-link">
  JS练习
</a></li><li class="dropdown-subitem"><a href="/front/base/网络基础/01.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-subitem"><a href="/books/JS高级程序设计/01.html" class="nav-link">
  JS高级程序设计
</a></li><li class="dropdown-subitem"><a href="/front/base/浏览器相关基础/01.html" class="nav-link">
  浏览器相关基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Java/JavaBase/01.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/Java/JavaUp/01.html" class="nav-link">
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/Java/JavaWeb/01.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/Java/JavaFrame/01.html" class="nav-link">
  Java框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/入门级算法/01.html" class="nav-link">
  入门级算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见算法/01.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见数据结构/01.html" class="nav-link">
  常见数据结构
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/前端算法与数据结构/01.html" class="nav-link">
  前端算法与数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="电子" class="dropdown-title"><span class="title">电子</span> <span class="arrow down"></span></button> <button type="button" aria-label="电子" class="mobile-dropdown-title"><span class="title">电子</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          STM32
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/STM32四轴飞行器/01.html" class="nav-link">
  STM32四轴飞行器
</a></li></ul></li><li class="dropdown-item"><h4>
          Arduino
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/Arduino墙画机/01.html" class="nav-link">
  Arduino墙画机
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四轴飞行器/01.html" class="nav-link">
  Arduino四轴飞行器
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四足仿生机器人/01.html" class="nav-link">
  Arduino四足仿生机器人
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/heidouya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://v.douyin.com/xV-8RHTmtUs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入浅出Vue.js/01.html" class="nav-link">
  深入浅出Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue/01.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue-router/01.html" class="nav-link">
  VueRouter
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vuex/01.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/front/vue/vue3/01.html" class="nav-link">
  Vue3核心剖析
</a></li><li class="dropdown-subitem"><a href="/front/vue/Vue知识点简单梳理/01.html" class="nav-link">
  Vue知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/深入React技术栈/01.html" class="nav-link">
  深入React技术栈
</a></li><li class="dropdown-subitem"><a href="/front/react/React进阶实践指南/01.html" class="nav-link">
  React进阶实践指南
</a></li><li class="dropdown-subitem"><a href="/front/react/React知识点简单梳理/01.html" class="nav-link">
  React知识点简单梳理
</a></li></ul></li><li class="dropdown-item"><h4>
          混合开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/混合开发/01.html" class="nav-link">
  混合开发探究
</a></li></ul></li><li class="dropdown-item"><h4>
          TypeScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/ts/极简入门Typescript/01.html" class="nav-link">
  极简入门Typescript
</a></li></ul></li><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/webpack/极简入门webpack/01.html" class="nav-link">
  极简入门
</a></li><li class="dropdown-subitem"><a href="/front/webpack/常见面试题/01.html" class="nav-link">
  常见面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/设计模式/JS设计模式核心原理和应用实践/01.html" class="nav-link">
  JS设计模式核心原理和应用实践
</a></li></ul></li><li class="dropdown-item"><h4>
          基础必备
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/base/html必备/01.html" class="nav-link">
  HTML必备
</a></li><li class="dropdown-subitem"><a href="/front/base/CSS必备/01.html" class="nav-link">
  CSS必备
</a></li><li class="dropdown-subitem"><a href="/front/base/JS基础/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/front/base/JS进阶/01.html" class="nav-link">
  JS进阶
</a></li><li class="dropdown-subitem"><a href="/front/base/JS练习/01.html" class="nav-link">
  JS练习
</a></li><li class="dropdown-subitem"><a href="/front/base/网络基础/01.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-subitem"><a href="/books/JS高级程序设计/01.html" class="nav-link">
  JS高级程序设计
</a></li><li class="dropdown-subitem"><a href="/front/base/浏览器相关基础/01.html" class="nav-link">
  浏览器相关基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Java/JavaBase/01.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-subitem"><a href="/Java/JavaUp/01.html" class="nav-link">
  Java进阶
</a></li><li class="dropdown-subitem"><a href="/Java/JavaWeb/01.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/Java/JavaFrame/01.html" class="nav-link">
  Java框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/入门级算法/01.html" class="nav-link">
  入门级算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见算法/01.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/常见数据结构/01.html" class="nav-link">
  常见数据结构
</a></li><li class="dropdown-item"><!----> <a href="/front/算法和数据结构/前端算法与数据结构/01.html" class="nav-link">
  前端算法与数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="电子" class="dropdown-title"><span class="title">电子</span> <span class="arrow down"></span></button> <button type="button" aria-label="电子" class="mobile-dropdown-title"><span class="title">电子</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          STM32
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/STM32四轴飞行器/01.html" class="nav-link">
  STM32四轴飞行器
</a></li></ul></li><li class="dropdown-item"><h4>
          Arduino
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/电子/Arduino墙画机/01.html" class="nav-link">
  Arduino墙画机
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四轴飞行器/01.html" class="nav-link">
  Arduino四轴飞行器
</a></li><li class="dropdown-subitem"><a href="/电子/Arduino四足仿生机器人/01.html" class="nav-link">
  Arduino四足仿生机器人
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/heidouya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器相关基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front/base/浏览器相关基础/01.html" class="sidebar-link">简介</a></li><li><a href="/front/base/浏览器相关基础/02.html" class="active sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#同源策略" class="sidebar-link">同源策略</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#jsonp" class="sidebar-link">JSONP</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#cors跨域资源共享" class="sidebar-link">CORS跨域资源共享</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#基于http-proxy实现跨域请求" class="sidebar-link">基于http proxy实现跨域请求</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#nginx反向代理" class="sidebar-link">nginx反向代理</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#基于postmessage实现跨域处理" class="sidebar-link">基于postmessage实现跨域处理</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#websocket" class="sidebar-link">websocket</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#document-domain-iframe" class="sidebar-link">document.domain + iframe</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#window-name-iframe" class="sidebar-link">window.name + iframe</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/02.html#location-hash-iframe" class="sidebar-link">location.hash + iframe</a></li></ul></li><li><a href="/front/base/浏览器相关基础/03.html" class="sidebar-link">存储</a></li><li><a href="/front/base/浏览器相关基础/04.html" class="sidebar-link">浏览器底层渲染机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/04.html#浏览器底层" class="sidebar-link">浏览器底层</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/04.html#有关样式的处理" class="sidebar-link">有关样式的处理</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/04.html#有关js的处理" class="sidebar-link">有关JS的处理</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/04.html#dom回流和重绘" class="sidebar-link">DOM回流和重绘</a></li></ul></li><li><a href="/front/base/浏览器相关基础/05.html" class="sidebar-link">防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/05.html#防抖" class="sidebar-link">防抖</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/05.html#节流" class="sidebar-link">节流</a></li></ul></li><li><a href="/front/base/浏览器相关基础/06.html" class="sidebar-link">浏览器缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/06.html#http缓存" class="sidebar-link">HTTP缓存</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/06.html#memorycache" class="sidebar-link">MemoryCache</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/06.html#service-worker-cache" class="sidebar-link">Service Worker Cache</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/06.html#push-cache" class="sidebar-link">Push Cache</a></li></ul></li><li><a href="/front/base/浏览器相关基础/07.html" class="sidebar-link">从url</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#url解析" class="sidebar-link">url解析</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#缓存检查" class="sidebar-link">缓存检查</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#dns解析" class="sidebar-link">DNS解析</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#tcp三次握手" class="sidebar-link">TCP三次握手</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#数据传输" class="sidebar-link">数据传输</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#tcp四次挥手" class="sidebar-link">TCP四次挥手</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/07.html#页面渲染" class="sidebar-link">页面渲染</a></li></ul></li><li><a href="/front/base/浏览器相关基础/08.html" class="sidebar-link">重绘和回流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/08.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/08.html#回流的触发条件" class="sidebar-link">回流的触发条件</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/08.html#重绘的触发条件" class="sidebar-link">重绘的触发条件</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/08.html#优化办法" class="sidebar-link">优化办法</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/08.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/front/base/浏览器相关基础/09.html" class="sidebar-link">图片懒加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/09.html#getboundingclientrect" class="sidebar-link">getBoundingClientRect</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/09.html#offsetheight、scrolltop" class="sidebar-link">offsetHeight、scrollTop</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/09.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/front/base/浏览器相关基础/16.html" class="sidebar-link">XSS攻击</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#什么是-xss-攻击" class="sidebar-link">什么是 XSS 攻击</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#xss-分类" class="sidebar-link">XSS 分类</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#xss-防范" class="sidebar-link">XSS 防范</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#xss-检测" class="sidebar-link">XSS 检测</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#xss-总结" class="sidebar-link">XSS 总结</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/16.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/front/base/浏览器相关基础/17.html" class="sidebar-link">CSRF攻击</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#什么是-csrf" class="sidebar-link">什么是 CSRF</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#csrf-分类" class="sidebar-link">CSRF 分类</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#csrf-特点" class="sidebar-link">CSRF 特点</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#防护策略" class="sidebar-link">防护策略</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#csrf-测试" class="sidebar-link">CSRF 测试</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/17.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/front/base/浏览器相关基础/18.html" class="sidebar-link">HTTPS 为什么是安全的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#对称加密" class="sidebar-link">对称加密</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#非对称加密" class="sidebar-link">非对称加密</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#混合加密" class="sidebar-link">混合加密</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#摘要算法" class="sidebar-link">摘要算法</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#认证" class="sidebar-link">认证</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#致谢" class="sidebar-link">致谢</a></li><li class="sidebar-sub-header"><a href="/front/base/浏览器相关基础/18.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="同源策略"><a href="#同源策略" class="header-anchor">#</a> 同源策略</h2> <p>同源策略是一个重要的安全策略，它用于限制一个源的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介。</p> <p>如果两个url的协议、域名、端口号都相同，则说明是同源的，有一个不同都是不同源的。</p> <p>下表给出了与 URL http://store.company.com/dir/page.html 的源进行对比的示例:</p> <table><thead><tr><th>URL</th> <th>结果</th> <th>原因</th></tr></thead> <tbody><tr><td>http://store.company.com/dir2/other.html</td> <td>同源</td> <td>只有路径不同</td></tr> <tr><td>http://store.company.com/dir/inner/another.html</td> <td>同源</td> <td>只有路径不同</td></tr> <tr><td>https://store.company.com/secure.html</td> <td>失败</td> <td>协议不同</td></tr> <tr><td>http://store.company.com:81/dir/etc.html</td> <td>失败</td> <td>端口不同</td></tr> <tr><td>http://news.company.com/dir/other.html</td> <td>失败</td> <td>主机不同</td></tr></tbody></table> <p>同源策略下有诸多限制，以下操作在不同源的情况是不能相互操作的：</p> <ul><li>Cookie、LocalStorage、IndexedDB 等存储性内容</li> <li>DOM 节点</li> <li>AJAX 请求发送后，服务端返回的结果被浏览器拦截了</li></ul> <p>但是以下三种标签是允许跨域加载资源的：</p> <ul><li>img</li> <li>script</li> <li>link</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>即便跨域，ajax请求也是可以发出去的，服务端也能正常响应，只是返回结果被浏览器拦截了。</p></div> <p>跨域问题实际是由浏览器的同源策略导致的，只要两个 url 的协议、域名、端口号有一个不同就是跨域了。</p> <h2 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h2> <h3 id="jsonp-初识"><a href="#jsonp-初识" class="header-anchor">#</a> JSONP 初识</h3> <p>JSONP 主要是利用 script 标签没有跨域限制这个特性来实现的。</p> <p>JSONP 由两部分组成：回调和数据。</p> <p>前端代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:3002/list?callback=callback<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>后端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>可以看到，浏览器控制台成功打印出了接口返回的数据。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="封装-jsonp"><a href="#封装-jsonp" class="header-anchor">#</a> 封装 JSONP</h3> <p>虽然我们上面实现了用 JSONP 请求跨域的接口数据，但是有两个不足之处：</p> <ol><li>我们在平时调用接口的时候会传递很多很多参数，如果手动将每个参数拼接到 url 中，未免有些麻烦。</li> <li>上面这种写完是同步的，接口没有返回数据的话，后面的代码就无法执行。</li></ol> <p>下面我们来封装一个 jsonp 函数，来解决上述问题。</p> <p>前端代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callback<span class="token operator">=</span><span class="token string">'callback'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
        window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
          document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
          window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>params<span class="token punctuation">,</span> callback <span class="token punctuation">}</span>
        <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3002/list'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>后端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>运行代码，依然能够拿到我们想要的结果。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="jq中的jsonp"><a href="#jq中的jsonp" class="header-anchor">#</a> JQ中的JSONP</h3> <p>客户端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3002/list&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;jsonp&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 可以省略</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>后端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>你有没有好奇服务端中的 callback 怎么来的？来，我们一起来看一下浏览器的控制面板：</p> <p><img src="/assets/img/1.597a68fa.png" alt=""></p> <p>原来 callback 是JQ帮我们加上的。我们可以通过 <code>jsonpCallback</code> 和 <code>jsonp</code> 两个属性对其进行配置，改成我们想要的名称。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3002/list&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;jsonp&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token comment">//可以省略</span>
  <span class="token literal-property property">jsonpCallback</span><span class="token operator">:</span> <span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 为 jsonp 请求指定一个回调函数名</span>
  <span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 在一个 jsonp 请求中重写回调函数的名字</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以看到请求参数变成了我们自己设置的名字，不过一般情况下我们不用去修改这两个名称。</p> <p><img src="/assets/img/2.9ac10cc0.png" alt=""></p> <h3 id="优、缺点"><a href="#优、缺点" class="header-anchor">#</a> 优、缺点</h3> <p>优点：兼容性好</p> <p>缺点：</p> <ul><li>服务器方必须支持。</li> <li>只支持 get 方式。</li> <li>要保证请求的域绝对安全，否则会有安全隐患。</li> <li>不好确定 JSONP 请求是否失败。</li></ul> <h2 id="cors跨域资源共享"><a href="#cors跨域资源共享" class="header-anchor">#</a> CORS跨域资源共享</h2> <p>客户端代码</p> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3002/list&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>服务端代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	whitList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'http://127.0.0.1:5501'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//设置白名单</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> origin <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>whitList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 设置哪个源可以访问我</span>
		res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 允许携带哪个头访问我</span>
		res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type,Content-Length,Authorization,Accept,X-Requested-With'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 允许哪个方法访问我</span>
		res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'PUT,GET,POST,DELETE,HEAD,OPTIONS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 允许携带cookie</span>
		res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OPTIONS请求不做任何处理</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>缺点：</p> <p>当 <code>Access-Control-Allow-Origin</code> 只能设置一个具体的源，但实际开发中，可能有多个源请求这个接口，如果将 <code>Access-Control-Allow-Origin</code> 设置为 * ，就不能携带cookie了。</p> <h2 id="基于http-proxy实现跨域请求"><a href="#基于http-proxy实现跨域请求" class="header-anchor">#</a> 基于http proxy实现跨域请求</h2> <p>安装依赖</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm i webpack webpack-cli webpack-dev-server html-webpack-plugin <span class="token parameter variable">-D</span> 
</code></pre></div><p>webpack 配置文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.min.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3003</span><span class="token punctuation">,</span>
    <span class="token comment">// 显示打包进度</span>
    <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:3002'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>前端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/index.js</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- src/index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>后端代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>我使用的依赖版本如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.38.1&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.7.0&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.11.2&quot;</span>
</code></pre></div><p>在终端执行 <code>npx webpack-dev-server</code> 报 <code>Cannot find module 'webpack-cli/bin/config-yargs</code>，原因是 webpack-dev-server 命令改成了 webpack serve，需要在终端执行 <code>npx webapck serve</code> 。</p> <h3 id="proxy解决跨域原理浅析"><a href="#proxy解决跨域原理浅析" class="header-anchor">#</a> proxy解决跨域原理浅析</h3> <p>proxy只是一层代理，用于把指定的 path 代理去后端提供的地址，背后使用 node 来做 server。只适用本地开发，因为该技术只是在webpack打包阶段在本地临时生成了node server，来实现类似nginx 的proxy_pass的反向代理效果</p> <p>proxy工作原理实质上是利用 <a href="https://www.npmjs.com/package/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这个http代理中间件，实现请求转发给其他服务器。例如：本地主机 A 为 http://localhost:3000 ，该主机浏览器发送一个请求，接口为/api，这个请求的数据（响应）在另外一台服务器 B 地址为 http://10.231.133.22:80上，这时，就可以通过A主机设置webpack proxy，直接将请求发送给B主机。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://www.example.org'</span><span class="token punctuation">,</span> <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http://localhost:3000/api/foo/bar -&gt; http://www.example.org/api/foo/bar</span>
</code></pre></div><p>下面我们来举个例子：
新建一个项目，安装 express</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm i express <span class="token parameter variable">-S</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3002/api/list&quot;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>配置服务：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server1.js</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>后端接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server2.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'ok'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'f'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>终端执行如下命令，启动服务</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">node</span> server1.js 
<span class="token function">node</span> server2.js
</code></pre></div><p>可以看到我们的网页访问地址是 <code>http://localhost:3000/</code>，网页中请求的接口地址是 <code>http://localhost:3002/api/list</code>，存在跨域问题，导致接口请求失败。</p> <p><img src="/assets/img/4.dc6f5dce.png" alt=""></p> <p>下面我们来对项目做一些修改，来解决上面的问题。</p> <p>首先先安装 http-proxy-middleware</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm i http-proxy-middleware <span class="token parameter variable">-D</span>
</code></pre></div><p>然后对 server1.js 文件做如下修改：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// server1.js</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:3002'</span><span class="token punctuation">,</span> <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>重新执行 <code>node server1.js</code>，浏览器中访问 http://localhost:3000/，可以看到接口请求成功了。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h2 id="nginx反向代理"><a href="#nginx反向代理" class="header-anchor">#</a> nginx反向代理</h2> <p>使用 nginx 反向代理解决跨域，只需要后端配置，不需要前端做什么事。</p> <p>从 www.baidu.com 向 www.taobao.com 发请求</p> <div class="language- extra-class"><pre class="language-text"><code>server: {
  listen 80;
  server_name www.taobao.com;
  location / {
    # 反向代理
    proxy_pass www.baidu.com;
    proxy_cookie_demo www.baidu.com www.taobao.com;
    add_header Access-Control-Allow-Origin www.baidu.com;
    add_header Access-Control-Allow-Credentials true;
  }
}
</code></pre></div><h2 id="基于postmessage实现跨域处理"><a href="#基于postmessage实现跨域处理" class="header-anchor">#</a> 基于postmessage实现跨域处理</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- /postmessage/a.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iframe<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:3002/b.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'来自a页面的信息'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:3002/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- /postmessage/b.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      e<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'来自b页面的信息'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>origin<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server1.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server2.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="websocket"><a href="#websocket" class="header-anchor">#</a> websocket</h2> <h2 id="document-domain-iframe"><a href="#document-domain-iframe" class="header-anchor">#</a> document.domain + iframe</h2> <p>这种方式只能实现同一个主域名，不同子域名之间的通信，如：a.f.com 和 b.f.com 。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- a.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iframe<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'f.com'</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'a'</span>

    <span class="token comment">// 获取 b 页面中 b 的值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>frame<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>b<span class="token punctuation">)</span>

  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- b.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'f.com'</span>
    <span class="token comment">// 获取 a 页面 a 的值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>a<span class="token punctuation">)</span>

    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">'b'</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="window-name-iframe"><a href="#window-name-iframe" class="header-anchor">#</a> window.name + iframe</h2> <p>a.html 和 proxy.html是同域的都是 http://localhost:3001/，b.html 的域是 http://localhost:3002/</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- a.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iframe<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:3002/b.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
    iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 需要我们将地址指向到同源中才可以</span>
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://localhost:3001/proxy.html'</span>
        count<span class="token operator">++</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- proxy.html --&gt;</span>
<span class="token comment">&lt;!-- 这个页面中可以什么内容都没有 --&gt;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- b.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'hello a'</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server1.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server2.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="location-hash-iframe"><a href="#location-hash-iframe" class="header-anchor">#</a> location.hash + iframe</h2> <p>a.html 和 proxy.html 同域，都在 http://localhost:3001/ 下面， b.html 在 http://localhost:3002/ 下面，不同域之间利用 iframe 的 location.hash 传值，相同域之间直接js访问来通信。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- a.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iframe<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:3002/b.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
    iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://localhost:3002/b.html#msg=hello'</span>
        count<span class="token operator">++</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 开放给 proxy.html 页面的回调方法</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- proxy.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- b.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iframe<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:3001/proxy.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 监听 a.html 传过来的 hash 值，再传给 proxy.html</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://localhost:3001/proxy.html'</span> <span class="token operator">+</span> location<span class="token punctuation">.</span>hash
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>参考：
<a href="https://www.cnblogs.com/Zhangcsc/p/11362987.html" target="_blank" rel="noopener noreferrer">VSCode 安装 code 命令<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener noreferrer">浏览器的同源策略<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903767226351623" target="_blank" rel="noopener noreferrer">九种跨域方式实现原理（完整版）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front/base/浏览器相关基础/01.html" class="prev">
        简介
      </a></span> <span class="next"><a href="/front/base/浏览器相关基础/03.html">
        存储
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.99d8b2e7.js" defer></script><script src="/assets/js/2.3eedf0cf.js" defer></script><script src="/assets/js/1.461a0297.js" defer></script><script src="/assets/js/47.08510b62.js" defer></script><script src="/assets/js/80.57c199e7.js" defer></script>
  </body>
</html>
