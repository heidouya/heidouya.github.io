(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{442:function(t,r,s){t.exports=s.p+"assets/img/1.83498317.png"},443:function(t,r,s){t.exports=s.p+"assets/img/2.4716c3f4.png"},444:function(t,r,s){t.exports=s.p+"assets/img/3.912390ed.png"},445:function(t,r,s){t.exports=s.p+"assets/img/4.242d9ec1.png"},998:function(t,r,s){"use strict";s.r(r);var e=s(20),a=Object(e.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("在 HTML 页面中引入 JS 文件有三种常见的方式：通过 script 标签直接引入、给 script 标签添加 async 属性、给 script 标签添加 defer 属性。")]),t._v(" "),r("h2",{attrs:{id:"纯-script-标签"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#纯-script-标签"}},[t._v("#")]),t._v(" 纯 script 标签")]),t._v(" "),r("p",[t._v("下图展示的是直接使用 script 标签引入 JS 文件。从图中可以看到，JS 文件的下载和执行都会阻塞 HTML 页面的解析。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(442),alt:""}})]),t._v(" "),r("h2",{attrs:{id:"async"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#async"}},[t._v("#")]),t._v(" async")]),t._v(" "),r("p",[t._v("下面两幅图展示的是给 script 标签设置 async 属性的情况。从图中可以看到，设置 async 属性后，JS 的文件的下载是不会阻塞页面渲染的，但是当 JS 文件执行时，如果页面还未渲染完成，此时已然会阻塞页面的渲染。")]),t._v(" "),r("p",[t._v("JS 文件下载完毕后，页面渲染还没完成，JS文件执行时会阻塞页面的渲染。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(443),alt:""}})]),t._v(" "),r("p",[t._v("JS 文件下载完毕后，页面渲染已经完成，JS 文件执行时不会阻塞页面渲染。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(444),alt:""}})]),t._v(" "),r("p",[t._v("如果页面中存在多个设置 async 属性的 script 标签，JS 文件的执行顺序依赖于哪个 JS 文件先返回，无法保证执行顺序。")]),t._v(" "),r("h2",{attrs:{id:"defer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#defer"}},[t._v("#")]),t._v(" defer")]),t._v(" "),r("p",[t._v("给 script 标签设置 defer 属性后，JS 的下载不会阻塞 HTML 的解析，如果 JS 文件已经下载完毕，HTML 还没有解析完毕会等到 HTML 解析完毕后再执行 JS 代码。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(445),alt:""}})]),t._v(" "),r("p",[t._v("如果页面中存在多个设置 defer 属性的 script 标签，会按照引入顺序依次执行。")]),t._v(" "),r("h2",{attrs:{id:"总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("script标签")]),t._v(" "),r("th",[t._v("JS执行顺序")]),t._v(" "),r("th",[t._v("是否阻塞解析HTML")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("code",[t._v("<script>")])]),t._v(" "),r("td",[t._v("依赖在页面中的位置")]),t._v(" "),r("td",[t._v("阻塞")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("<script async>")])]),t._v(" "),r("td",[t._v("网络请求的返回顺序")]),t._v(" "),r("td",[t._v("可能阻塞也可能不阻塞")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("<script defer>")])]),t._v(" "),r("td",[t._v("依赖在页面中的位置")]),t._v(" "),r("td",[t._v("不阻塞")])])])]),t._v(" "),r("p",[t._v("对于有可能阻塞 HTML 解析的引入 JS 的方式，操作 DOM 元素时一定要小心，因为此时要操作的这个 DOM 元素可能还不存在。")]),t._v(" "),r("p",[t._v("参考：")]),t._v(" "),r("p",[t._v("《JS高级程序设计（第四版）》")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("async vs defer attributes"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000006778717",target:"_blank",rel:"noopener noreferrer"}},[t._v("浅谈script标签的defer和async"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://juejin.cn/post/6894629999215640583",target:"_blank",rel:"noopener noreferrer"}},[t._v("图解 script 标签中的 async 和 defer 属性"),r("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=a.exports}}]);